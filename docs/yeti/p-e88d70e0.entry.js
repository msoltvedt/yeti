import{r as t,h as e,H as i,g as s}from"./p-b0bf542b.js";const n=class{constructor(e){t(this,e);this.ignoreClass="yeti-unsaved_changes-ignore_changes";this.prompterClass="yeti-unsaved_changes-prompter";this.nonprompterClass="yeti-unsaved_changes-nonprompter";this.weGotThis=false;this.handleBeforeUnload=t=>{if(!this.weGotThis){t.preventDefault()}else{this.weGotThis=false;window.removeEventListener("beforeunload",this.handleBeforeUnload,{capture:true});return undefined}};this.handleExitClick=t=>{this.weGotThis=true;if(this.formHasChanges){this.clickedElementLeftHanging=t.currentTarget;t.preventDefault();t.stopImmediatePropagation();this.isOpen=true}};this.handleModalPrimaryClick=()=>{let t=this.clickedElementLeftHanging;this.isOpen=false;t.removeEventListener("click",this.handleExitClick,true);t.click()};this.formId="";this.formHasChanges=false;this.isOpen=false}handleModalSecondaryClick(){this.isOpen=false}initializeLinkListeners(){let t=document.querySelectorAll(`a:not( .${this.nonprompterClass} ), .${this.prompterClass}`);t.forEach((t=>{t.addEventListener("click",this.handleExitClick,true)}))}initializeNonPrompters(){let t=document.querySelectorAll(`.${this.nonprompterClass}`);t.forEach((t=>{t.addEventListener("click",(()=>{this.weGotThis=true}))}))}componentWillLoad(){if(this.formId==""){console.error("Error in Yeti Unsaved Changes component: the form-id attribute must be the id of a valid form element.");return}this.form=document.getElementById(this.formId);if(this.form=="undefined"||!this.form.tagName||this.form.tagName.toLowerCase()!="form"){console.error("Error in Yeti Unsaved Changes component: the form-id attribute must be the id of a valid form element.");return}window.addEventListener("beforeunload",this.handleBeforeUnload,{capture:true});this.form.addEventListener("input",(t=>{let e=t.target;if(e&&e.classList&&!e.classList.contains(this.ignoreClass)){this.formHasChanges=true}}));this.initializeLinkListeners();this.initializeNonPrompters()}render(){return e(i,null,e("yeti-modal",{heading:"Unsaved Changes",id:"modal1","described-by":"modal1_description",isActive:this.isOpen,showClose:false},e("yeti-modal-content",null,e("p",{id:"modal1_description",class:"yeti-margin-bottom-4"},"You have unsaved changes that will be lost."),e("p",null,"Are you sure you want to leave the page?")),e("yeti-modal-buttons",null,e("button",{class:"yeti-button yeti-button-primary",id:"unsavedChangesModalPrimaryButton",onClick:()=>{this.handleModalPrimaryClick()}},"Yes, Discard Changes"),e("button",{class:"yeti-button yeti-button-secondary",id:"unsavedChangesModalSecondaryButton",onClick:()=>{this.handleModalSecondaryClick()}},"No, Keep Editing"))))}get el(){return s(this)}};export{n as yeti_unsaved_changes};
//# sourceMappingURL=p-e88d70e0.entry.js.map