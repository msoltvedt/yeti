{"file":"yeti-page-contents.entry.esm.js","mappings":"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","names":[],"sources":["src/components/yeti-page-contents/yeti-page-contents.tsx"],"sourcesContent":["import { Component, Prop, h, Element } from '@stencil/core';\nimport { utils, YetiPageContentsHeader } from '../../utils/utils';\n\n@Component({\n  tag: 'yeti-page-contents',\n  shadow: false,\n})\nexport class YetiPageContents {\n\n  @Element() el: HTMLElement;\n\n  /**\n   * Whether to show the Page Contents menu in expanded or closed state.\n   */\n  @Prop() isExpanded: boolean = true;\n\n\n  /**\n   * Whether to show the Page Contents menu in expanded or closed state.\n   */\n  @Prop({\n    mutable: true,\n    reflect: true\n  }) wrapperId: string = \"\"; // Will be set in componentWillLoad;\n\n\n  /**\n   * Headings within a parent of the given class will be ignored.\n   */\n  @Prop() ignoreWithin: string = \"\";\n\n\n  /**\n   * An array of objects containing the heading names and ids.\n   */\n  headings: YetiPageContentsHeader[] = []; // Will be set in componentWillLoad;\n\n\n  componentWillLoad() {\n    \n    let elId = this.el.id;\n    let elsParent;\n    let elsGrandparent;\n    let headingElements;\n    let pageWrapper = document.createElement(\"div\");\n    pageWrapper.classList.add(\"yeti-page_contents-wrapper\");\n\n    // Hide this whole component from screen-readers (since they have a better version built in)\n    this.el.setAttribute(\"aria-hidden\", \"true\");\n\n    // Set up ids\n    if (!elId) {\n      elId = utils.generateUniqueId();\n      this.wrapperId = `${elId}_wrapper`;\n    }\n\n    // Set up page structure:\n    // - Wrap el's parent in a new div with class .yeti-page_contents-wrapper\n    // - Move the parent into that div\n    // - Make el a sibling of parent\n    elsParent = this.el.parentElement;\n    elsGrandparent = elsParent.parentElement;\n\n    if (!elsParent || !elsGrandparent) {\n      console.warn(\"yeti-page-contents requires containing parent and grandparent elements.\");\n      return;\n    }\n\n    elsParent.classList.add(\"yeti-page_contents-wrappee\");\n\n    elsGrandparent.insertBefore(pageWrapper, elsParent);\n    pageWrapper.appendChild(elsParent);\n    pageWrapper.appendChild(this.el);\n\n    // Build the list of headings\n    if (this.ignoreWithin != '') {\n      headingElements = elsParent.querySelectorAll(`:is(h1, h2, h3, h4, h5, h6):not(.${this.ignoreWithin} :is(h1, h2, h3, h4, h5, h6))`); // All h1, h2, h3, h4, h5, h6 elements that are not children of a parent with the ignore class\n    } else {\n      headingElements = elsParent.querySelectorAll(\"h1, h2, h3, h4, h5, h6\");\n    }\n    \n\n    for (let i = 0; i < headingElements.length; i++) {\n      \n      let heading = headingElements[i]; // Actual heading HTMLElement\n      let newHeading: YetiPageContentsHeader = {\n        label: \"\",\n        id: \"\",\n        level: 1\n      };\n\n      heading.id = (heading.id && heading.id != '') ? heading.id : utils.generateUniqueId(); // If the id doesn't have an id then give it one.\n\n      newHeading.label = heading.innerText;\n      newHeading.id = heading.id;\n      newHeading.level = parseInt((heading.nodeName).substring(1)); // Get the \"n\" in Hn (e.g. 2 in H2)\n      \n      this.headings.push(newHeading);\n    }\n\n  }\n\n\n\n  render() {\n\n    let wrapperCSS = \"yeti-page_contents\";\n\n    if (!this.isExpanded) {\n      wrapperCSS += \" yeti-page_contents__collapsed\";\n    }\n\n    return (\n      \n      <div class={wrapperCSS} id={this.wrapperId}>\n\n        {(!this.isExpanded) ? \n          <button class=\"yeti-page_contents-minmax\" title='Expand page contents' onClick={(e) => {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            this.isExpanded = true;\n          }}><yeti-icon iconCode='toc'></yeti-icon></button> \n        : \n          \"\"}\n\n        <ul class=\"yeti-page_contents-headings\">\n\n          {this.headings.map((heading, index) => {\n\n              let css = `yeti-page_contents-heading yeti-page_contents-heading-level-${heading.level}`;\n              let href = `#${heading.id}`;\n              let myId = `${heading.id}_entry`;\n              let label = heading.label;\n              let minimize = {};\n\n              if (index == 0) {\n                // Render the minimize icon for the first one.\n                css += ' yeti-page_contents-heading-title';\n                minimize = <button class=\"yeti-page_contents-minmax\" title='Minimize' onClick={(e) => {\n                  e.preventDefault();\n                  e.stopImmediatePropagation();\n                  this.isExpanded = false;\n                }}><yeti-icon iconCode='minimize'></yeti-icon></button>;\n              }\n\n              return <li class={css} id={myId} key={myId}>\n                <a href={href} onClick={(e) => {\n                  e.preventDefault();\n                  e.stopImmediatePropagation();\n                  document.getElementById(heading.id).scrollIntoView({ behavior: \"smooth\", inline: \"start\" });\n                }}>{label}{(index == 0) ? minimize : ''}</a>\n              </li>;\n            })\n          }\n\n          <li class='yeti-page_contents-heading-actions'>\n            \n            <a href='' title=\"Back to top\" onClick={(e) => {\n              e.preventDefault();\n              e.stopImmediatePropagation();\n              document.body.scrollIntoView({ behavior: \"smooth\", inline: \"start\" });\n            }} class='yeti-page_contents-heading-action'><yeti-icon iconCode='vertical_align_top'></yeti-icon></a>\n            \n            <a href='' title=\"Collapse all code blocks\" onClick={(e) => {\n              \n              let demoes = document.getElementsByClassName(\"ydoc-code_sample\");\n          \n              e.preventDefault();\n              e.stopImmediatePropagation();\n          \n              for (let i = 0; i < demoes.length; i++) {\n                demoes[i].classList.remove(\"ydoc-demo__code_expanded\");\n              }\n\n            }} class='yeti-page_contents-heading-action'><yeti-icon iconCode='unfold_less_double'></yeti-icon></a>\n            \n            <a href='' title=\"Expand all code blocks\" onClick={(e) => {\n              \n              let demoes = document.getElementsByClassName(\"ydoc-code_sample\");\n          \n              e.preventDefault();\n              e.stopImmediatePropagation();\n          \n              for (let i = 0; i < demoes.length; i++) {\n                demoes[i].classList.add(\"ydoc-demo__code_expanded\");\n              }\n\n            }} class='yeti-page_contents-heading-action'><yeti-icon iconCode='unfold_more_double'></yeti-icon></a>\n\n          </li>\n\n        </ul>\n\n      </div>\n\n    );\n  }\n\n\n\n  componentDidLoad() {\n    // Set up the Intersection Observer stuff (so we can style the list item whose heading is in view)\n\n    let headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');\n    let observer;\n    let options = {\n      root: null,\n      rootMargin: '0px',\n      threshold: 1\n    };\n\n    observer = new IntersectionObserver(handleIntersect, options);\n\n    headings.forEach(heading => {\n      observer.observe(heading);\n    });\n\n    function handleIntersect(entries) {\n      \n      entries.forEach( (entry) => {\n\n        let myCorrespondingEntry = document.querySelector(`#${entry.target.id}_entry`);\n        //let allCorrespondingEntries = document.querySelectorAll(\".yeti-page_contents-heading\");\n\n        if (entry.isIntersecting && entry.target.nodeName != \"H1\") {\n\n          // allCorrespondingEntries.forEach( oneOfAllEntries => {\n          //   oneOfAllEntries.classList.remove(\"yeti-page_contents-heading__visible\");\n          // });\n\n          if (myCorrespondingEntry && myCorrespondingEntry.classList) {\n            myCorrespondingEntry.classList.add(\"yeti-page_contents-heading__visible\");\n          }\n        \n        } else {\n\n          if (myCorrespondingEntry && myCorrespondingEntry.classList) {\n            myCorrespondingEntry.classList.remove(\"yeti-page_contents-heading__visible\");\n          }\n\n        }\n\n      });\n\n    }\n\n  }\n  \n\n}\n"],"version":3}