{"version":3,"file":"yeti-tooltip.entry.esm.js","sources":["src/components/yeti-tooltip/yeti-tooltip.tsx"],"sourcesContent":["import { Component, Prop, h, State, Element, Listen } from '@stencil/core';\r\nimport { utils } from '../../utils/utils';\r\n\r\n@Component({\r\n  tag: 'yeti-tooltip',\r\n  shadow: false,\r\n})\r\nexport class YetiTooltip {\r\n\r\n  @Element() el: HTMLElement;\r\n\r\n  /**\r\n   * CSS classlist to add to the element serving as the component's wrapper.\r\n   */\r\n  @Prop() wrapperClass: string = '';\r\n\r\n  /**\r\n   * CSS classlist to add to the actual tooltip element.\r\n   */\r\n  @Prop() tooltipClass: string = '';\r\n\r\n  /**\r\n   * Text value to display as the tooltip's contents.\r\n   */\r\n  @Prop() text: string = \"I'm a helpful tooltip.\";\r\n\r\n  /**\r\n   * Token list to describe the tooltip's position relative to its anchor: left | right and/or above | below.\r\n   */\r\n  @Prop() position: string = \"above\";\r\n\r\n  /**\r\n   * Boolean value that sets whether the tooltip opens on hover/focus (default) or on click.\r\n   */\r\n  @Prop() clickToOpen: boolean = false;\r\n\r\n  /**\r\n   * id of the component's slot element.\r\n   */\r\n  @Prop({\r\n    mutable: true,\r\n    reflect: true\r\n  }) slotId: string = \"\"; // Set on load\r\n\r\n  /**\r\n   * id of the component's actual element corresponding to the tooltip. Will be auto-populated with a unique value if not provided.\r\n   */\r\n  @Prop({\r\n    mutable: true,\r\n    reflect: true\r\n  }) tipId: string = \"\"; // Set on load\r\n\r\n  /**\r\n   * Whether the anchor should be forced to be a CSS display block style or left as is.\r\n   */\r\n  @Prop() blockAnchor: boolean = false;\r\n\r\n  /**\r\n   * Whether the tooltip should remain open permanently.\r\n   */\r\n  @Prop() forceOpen: boolean = false;\r\n\r\n  /**\r\n   * Whether the tooltip has been clicked open or not.\r\n   */\r\n  @Prop({\r\n    mutable: true,\r\n    reflect: true\r\n  }) isClickedOpen: boolean = false;\r\n\r\n  /**\r\n   * Toggle to force a re-render of the whole component.\r\n   */\r\n  @State() iLoveJSX: boolean = false;\r\n\r\n  /**\r\n   * Whether the tooltip has rich content (i.e. html rather than just a string of text) or not.\r\n   */\r\n  @State() hasRichContent: boolean = false;\r\n\r\n  justClickedClosed: boolean = false;\r\n\r\n\r\n  @Listen('mouseover')\r\n  handleSlotHover() {\r\n    if (!this.clickToOpen) {\r\n      this.scrollTooltipIntoView();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  @Listen('focusin')\r\n  handleSlotFocus() {\r\n    if (!this.clickToOpen) {\r\n      this.scrollTooltipIntoView();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  @Listen('click', {\r\n    target: 'body'\r\n  })\r\n  handleDeFocusingClick() {\r\n    this.isClickedOpen = false;\r\n  }\r\n\r\n\r\n\r\n  @Listen('click')\r\n  handleClick(e) {\r\n    e.stopImmediatePropagation(); // Intercept the click event before it gets to the body-level handler\r\n  }\r\n\r\n  \r\n\r\n  handleTriggerClick(e) {\r\n    if (this.clickToOpen && !this.justClickedClosed) {\r\n      this.closeOtherTooltips();\r\n      e.stopImmediatePropagation();\r\n      e.preventDefault();\r\n      this.scrollTooltipIntoView();\r\n      this.isClickedOpen = !this.isClickedOpen;\r\n      return false;\r\n    }\r\n  }\r\n\r\n  \r\n\r\n  handleTriggerKeyPress(e) {\r\n    if (this.clickToOpen && e.key == \"Enter\" && !this.justClickedClosed) {\r\n      this.handleTriggerClick(e);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  handleCloseTooltipClick(e) {\r\n    this.justClickedClosed = true;\r\n    e.stopImmediatePropagation();\r\n    e.preventDefault();\r\n    this.isClickedOpen = false;\r\n  }\r\n\r\n\r\n\r\n  closeOtherTooltips() {\r\n    let allTooltips = document.querySelectorAll(\"yeti-tooltip\");\r\n\r\n    for (let i = 0; i < allTooltips.length; i++) {\r\n      let someTooltip = allTooltips[i];\r\n      if (someTooltip.clickToOpen && someTooltip.isClickedOpen && someTooltip.id != this.el.getAttribute(\"id\")) {\r\n        someTooltip.isClickedOpen = false;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  scrollTooltipIntoView() {\r\n    let actual = this.el.querySelector(\".yeti-tooltip\");\r\n    actual.scrollIntoView({\r\n      behavior: \"smooth\",\r\n      block: \"nearest\"\r\n    });\r\n  }\r\n\r\n\r\n\r\n  componentWillLoad() {\r\n    // Set up ids\r\n    let componentId = this.el.getAttribute(\"id\");\r\n\r\n    if (!componentId || componentId == \"\") {\r\n      componentId = utils.generateUniqueId();\r\n      this.el.setAttribute(\"id\", componentId);\r\n    }\r\n\r\n    if (this.el.querySelector('[slot=\"content\"]')) {\r\n      this.hasRichContent = true;\r\n    }\r\n\r\n    this.tipId = (this.tipId != \"\") ? this.tipId : `${componentId}_tip`;\r\n    this.slotId = (this.slotId != \"\") ? this.slotId : `${componentId}_slot`;\r\n  }\r\n\r\n\r\n\r\n  renderContent() {\r\n    if (this.hasRichContent) {\r\n      return <slot name=\"content\"></slot>\r\n    } else {\r\n      return this.text;\r\n    }\r\n  }\r\n\r\n\r\n  render() {\r\n\r\n    let wrapperClass = 'yeti-tooltip-wrapper';\r\n    let tipClass = 'yeti-tooltip';\r\n\r\n    wrapperClass += (this.wrapperClass != '') ? ` ${this.wrapperClass}` : '';\r\n    tipClass += (this.tooltipClass != '') ? ` ${this.tooltipClass}` : '';\r\n\r\n    tipClass += (this.isClickedOpen) ? ' yeti-tooltip__clicked_open' : '';\r\n\r\n    tipClass += (this.forceOpen) ? ' yeti-tooltip__forced_open' : '';\r\n\r\n    wrapperClass += (this.clickToOpen) ? ' yeti-tooltip-wrapper-is_click_to_open' : '';\r\n    wrapperClass += (this.blockAnchor) ? ' yeti-tooltip-wrapper-has_block_anchor' : '';\r\n\r\n    switch (this.position) {\r\n\r\n      case \"right\":\r\n\r\n        tipClass += \" yeti-tooltip-right\";\r\n        break;\r\n\r\n      case \"below\":\r\n\r\n        tipClass += \" yeti-tooltip-below\";\r\n        break;\r\n\r\n      case \"left\":\r\n\r\n        tipClass += \" yeti-tooltip-left\";\r\n        break;\r\n\r\n      case \"below-left\":\r\n\r\n        tipClass += \" yeti-tooltip-below-left\";\r\n        break;\r\n\r\n      case \"below-right\":\r\n\r\n        tipClass += \" yeti-tooltip-below-right\";\r\n        break;\r\n\r\n      case \"above-left\":\r\n\r\n        tipClass += \" yeti-tooltip-above-left\";\r\n        break;\r\n\r\n      case \"above-right\":\r\n\r\n        tipClass += \" yeti-tooltip-above-right\";\r\n        break;\r\n\r\n    }\r\n\r\n    return ([\r\n      <div class={wrapperClass}>\r\n\r\n        <div \r\n          class=\"yeti-tooltip-trigger\" \r\n          onClick={(e) => this.handleTriggerClick(e)}\r\n          onKeyPress={(e) => this.handleTriggerKeyPress(e)}\r\n          {...((this.clickToOpen) ? { \"tabindex\": 0 } : {})}  \r\n        >\r\n\r\n          <slot />\r\n\r\n        </div>\r\n\r\n\r\n        <div class={tipClass}>\r\n\r\n          <div class=\"yeti-tooltip-content\" id={this.tipId}>{this.renderContent()}</div>\r\n\r\n          {\r\n            (this.clickToOpen && this.isClickedOpen) ?\r\n\r\n              <button class=\"yeti-tooltip-close\" onClick={(e) => { this.handleCloseTooltipClick(e); }}>\r\n                <yeti-icon iconCode=\"close\" iconClass='yeti-color-white yeti-typo-size-5'></yeti-icon>\r\n              </button>\r\n\r\n            :\r\n              null\r\n          }\r\n          \r\n        </div>\r\n\r\n      </div>\r\n    ]);\r\n  }\r\n\r\n\r\n\r\n  componentDidRender() {\r\n    let slot = this.el.querySelector(\".yeti-tooltip-trigger\").firstElementChild;\r\n    let trigger = this.el.querySelector(\".yeti-tooltip-trigger\") as HTMLElement;\r\n    //slot.setAttribute(\"tabindex\", \"0\");\r\n    slot.setAttribute(\"aria-describedby\",this.tipId);\r\n\r\n    if (this.justClickedClosed && trigger) {\r\n      // The user just clicked the tooltip closed. Restore focus to the trigger.\r\n      this.justClickedClosed = false;\r\n      trigger.focus();\r\n    }\r\n\r\n  }\r\n\r\n}\r\n"],"names":[],"mappings":"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"}