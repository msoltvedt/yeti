import{r as e,c as t,h as l,g as i}from"./p-5c17298e.js";const s=class{constructor(l){e(this,l);this.fileExplorerChange=t(this,"fileExplorerChange",7);this.wrapperCSS="";this.showFiles=true;this.model=undefined;this.terminus=undefined;this.iLoveJSX=false}handleItemClick(e,t=0,l=0){let i=e.currentTarget.getAttribute("data-path");let s=i.substring(0,i.lastIndexOf("/"));let r=this.getFolderFromPath(s);this.setNewSelectedTerminus(i);this.updatePath(i);r.isSelected=true;r.selectedIndex=l;this.fileExplorerChange.emit({path:i,depth:t,index:l});this.iLoveJSX=!this.iLoveJSX}async newFolderObject(){let e;e.content=[];e.isRoot=false;e.isSelected=false;e.isTerminus=false;e.name="";e.path="";return e}updatePath(e){let t=e.slice(1).split("/");let l=this.model.root;for(let e=0;e<t.length;e++){let i=l.content.map((e=>e.name));l.isSelected=true;l.selectedIndex=i.indexOf(t[e]);l=l.content[i.indexOf(t[e])]}}setNewSelectedTerminus(e){let t;t=this.getFolderFromPath(e);this.clearTerminusPath();this.model.root.isSelected=true;t.isSelected=true;t.isTerminus=true;this.terminus=t}clearTerminusPath(){if(!this.terminus){return}else{let e=this.terminus.path.slice(1).split("/");let t=this.model.root;for(let l=0;l<e.length;l++){let i=t.content.map((e=>e.name));t=t.content[i.indexOf(e[l])];t.isSelected=false;t.isTerminus=false}this.terminus=null}}getFolderFromPath(e){let t;let l=this.model.root;if(e==""){return this.model.root}e=e.slice(1);t=e.split("/");for(let e=0;e<t.length;e++){let i=t[e];let s=l.content.map((e=>e.name));l=l.content[s.indexOf(i)]}return l}renderFolders(){let e=[];let t={name:"",path:"/",content:[],selectedIndex:-1,isRoot:false,isSelected:false,isTerminus:false};if(this.model.root.content.length==0){for(let l=0;l<this.model.minDisplayDepth;l++){e.push(this.renderFolder(l==0?this.model.root:t))}}else{let t=this.model.root;do{e.push(this.renderFolder(t));t=t.content[t.selectedIndex]}while(t&&t.isSelected)}return e}renderFolder(e){let t=e.path.split("/").length-1;let i=l("div",{class:"yeti-file_explorer-folder"},l("ul",{class:"yeti-file_explorer-folder-items"},this.renderFolderContents(e,t)));return i}renderFolderContents(e,t=-1){return e.content.map(((e,l)=>this.renderItem(e,t,l)))}renderItem(e,t=-1,i=-1){let s="yeti-file_explorer-folder-item-wrapper"+(e.isSelected?" yeti-file_explorer-folder-item-wrapper__selected":"");let r=l("li",{class:"yeti-file_explorer-folder-item"},l("button",{class:s,onClick:e=>{this.handleItemClick(e,t,i)},"data-path":e.path},l("yeti-icon",{iconCode:"folder",alt:"subfolder","icon-style":"outlined",class:"yeti-file_explorer-folder-item-icon"}),l("span",{class:"yeti-file_explorer-folder-item-name"},e.name),l("yeti-icon",{iconCode:"chevron_right",alt:"open subfolder",class:"yeti-file_explorer-folder-more"})));return r}componentWillLoad(){let e;if(!this.model){let e={root:{name:"",path:"/",content:[],selectedIndex:-1,offset:0,pageSize:0,totalElements:0,isRoot:true,isSelected:false,isTerminus:false},minDisplayDepth:3};this.model=e}e=this.model.root.content;e.forEach(((e,t)=>{if(e.isSelected){e.selectedIndex=t}}))}render(){let e="yeti-file_explorer-wrapper";e+=this.wrapperCSS!=""?` ${this.wrapperCSS}`:"";return l("div",{class:e},l("div",{class:"yeti-file_explorer"},l("div",{class:"yeti-file_explorer-folders"},this.renderFolders())),l("div",{class:"yeti-file_explorer-path"},this.terminus?this.terminus.path:""))}componentDidRender(){let e=this.el.querySelectorAll(".yeti-file_explorer-folder");if(e&&e.length){e[e.length-1].scrollIntoView({behavior:"smooth",block:"nearest"})}}get el(){return i(this)}};export{s as yeti_file_explorer};
//# sourceMappingURL=p-3553b00e.entry.js.map