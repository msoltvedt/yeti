import{r as e,c as t,h as i,g as r}from"./p-e8f90371.js";import{u as l}from"./p-943baa85.js";const s=class{constructor(i){e(this,i);this.fileExplorerChange=t(this,"fileExplorerChange",7);this.wrapperClass="";this.showFiles=true;this.minimumDisplayDepth=3;this.path=[{name:"root",content:[],path:"",isFolder:true,isRoot:true,isSelected:true,isLoading:false,selectedIndex:-1,offset:0,pageSize:1e3,totalElements:0,id:l.generateUniqueId(),type:"folder"}];this.iLoveJSX=false}handlePathChange(){}handleItemClick(e=0,t=0){let i="";while(this.path.length>e+1){this.path.pop()}this.path[e].content.forEach((e=>{e.isSelected=false}));this.path[e].isSelected=true;this.path[e].selectedIndex=t;i+=this.path[e].content[t].path;this.fileExplorerChange.emit({path:i,depth:e,index:t})}handleItemKeyDown(e,t=0,i=0){let r=e.target;let l=r.closest(".yeti-file_explorer-folder-items");let s=l.querySelectorAll(".yeti-file_explorer-folder-item .yeti-file_explorer-folder-item-wrapper");let o;let a;let d=e.key.toLowerCase();switch(d){case"arrowdown":{e.preventDefault();o=i+1>=this.path[t].content.length?0:i+1;a=s[o];a.focus();break}case"arrowup":{e.preventDefault();o=i-1<0?this.path[t].content.length-1:i-1;a=s[o];a.focus();break}case"arrowright":{if(this.path[t+1]&&this.path[t+1].content&&this.path[t+1].content.length>0){let i=this.path[t+1].selectedIndex>0?this.path[t+1].selectedIndex:0;e.preventDefault();a=this.el.querySelectorAll(".yeti-file_explorer-folder-items")[t+1].querySelectorAll(".yeti-file_explorer-folder-item .yeti-file_explorer-folder-item-wrapper")[i];a.focus();a.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}break}case"arrowleft":{if(t>0){let i=this.path[t-1].selectedIndex;e.preventDefault();a=this.el.querySelectorAll(".yeti-file_explorer-folder-items")[t-1].querySelectorAll(".yeti-file_explorer-folder-item .yeti-file_explorer-folder-item-wrapper")[i];a.focus();a.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}break}}}async newFolderObject(){let e={content:[],name:undefined,path:undefined,isFolder:true,isRoot:false,isLoading:false,isSelected:false,selectedIndex:-1,id:l.generateUniqueId()};return e}renderFolders(){let e=[];let t={name:"",path:"/",content:[],selectedIndex:-1,isRoot:false,isSelected:false,isLoading:false};this.path.forEach(((t,i)=>{e.push(this.renderFolder(t,i))}));while(e.length<this.minimumDisplayDepth){e.push(this.renderFolder(t,-1))}return e}renderFolder(e,t){let r=i("div",{class:"yeti-file_explorer-folder"},i("ul",{class:"yeti-file_explorer-folder-items"},i("li",{class:"yeti-file_explorer-folder-item"},"Loading...")));let l=i("div",{class:"yeti-file_explorer-folder"},i("ul",{class:"yeti-file_explorer-folder-items"},this.renderFolderContents(e,t)));return e.isLoading?r:l}renderFolderContents(e,t=-1){return e.content.map(((e,i)=>this.renderItem(e,t,i)))}renderItem(e,t=-1,r=-1){let l="yeti-file_explorer-folder-item-wrapper"+(e.isSelected?" yeti-file_explorer-folder-item-wrapper__selected":"");let s=i("li",{class:"yeti-file_explorer-folder-item"},i("button",{class:l,onClick:()=>{this.handleItemClick(t,r)},"data-path":e.path,onKeyDown:e=>{this.handleItemKeyDown(e,t,r)}},i("yeti-icon",{iconCode:"folder",alt:"subfolder","icon-style":"outlined",class:"yeti-file_explorer-folder-item-icon"}),i("span",{class:"yeti-file_explorer-folder-item-name"},e.name),i("yeti-icon",{iconCode:"chevron_right",alt:"open subfolder",class:"yeti-file_explorer-folder-more"})));return s}render(){let e="yeti-file_explorer-wrapper";e+=this.wrapperClass!=""?` ${this.wrapperClass}`:"";return i("div",{key:"6a402ed8301e9801d2f97a3878872e94cd0658ba",class:e},i("div",{key:"bda6c284c53b374b7437329dc2bd4743cf6db0b3",class:"yeti-file_explorer"},i("div",{key:"8b9be75f3db24d9a4948ff12a7f69b8d51b9b3c9",class:"yeti-file_explorer-folders"},this.renderFolders())),i("div",{key:"26b9b72c044086d03079ca6720051fa4d3ef2b52",class:"yeti-file_explorer-path"},this.path[this.path.length-1].path))}componentDidRender(){let e=this.el.querySelector(".yeti-file_explorer-folders");if(e){e.scrollIntoView({behavior:"smooth",block:"start",inline:"end"})}}get el(){return r(this)}static get watchers(){return{path:["handlePathChange"]}}};export{s as yeti_file_explorer};
//# sourceMappingURL=p-5d1c1a55.entry.js.map