{"version":3,"file":"yeti-modal.entry.esm.js","sources":["src/components/yeti-modal/yeti-modal.tsx"],"sourcesContent":["import { Component, Prop, State, h, Element, Watch, Listen } from '@stencil/core';\r\nimport { utils } from '../../utils/utils';\r\n\r\n@Component({\r\n  tag: 'yeti-modal',\r\n  shadow: false,\r\n})\r\nexport class YetiModal {\r\n\r\n  @Element() el: HTMLElement;\r\n\r\n  /**\r\n   * Whether or not it's the special Side Sheet variant of Modal.\r\n   */\r\n  @Prop() isSideSheet: boolean = false;\r\n\r\n  /**\r\n   * The string that will display in the modal's heading and serve as its title.\r\n   */\r\n  @Prop() heading: string = \"Modal Heading\";\r\n\r\n  /**\r\n   * The optional id of an element that describes the modal's content.\r\n   */\r\n  @Prop() describedBy: string = \"\";\r\n\r\n  /**\r\n   * The optional size of the modal (other than the default). Options are xl, l, s, xs.\r\n   */\r\n  @Prop() size: string = \"\";\r\n\r\n  /**\r\n   * Optional CSS classes to add to the modal element.\r\n   */\r\n  @Prop() modalClass: string = \"\";\r\n\r\n  /**\r\n   * Whether overflowing contents are shown via scrolling or clipped.\r\n   */\r\n  @Prop() isScrollable: boolean = true;\r\n\r\n  /**\r\n   * Tracks whether the Modal is displaying or not.\r\n   */\r\n  @Prop({\r\n    mutable: true,\r\n    reflect: true\r\n  }) isActive: boolean = false;\r\n  @Watch('isActive')\r\n  handleFocus(newValue: boolean) {\r\n    // When the Modal becomes active it should take focus away from whatever had it before, but\r\n    // we want to keep track of what that was so we can return focus if Modal becomes inactive.\r\n\r\n    // First, normal Modals have only two states: active and inactive (i.e. they don't use the isOpening and isClosing states)\r\n    if (!this.isSideSheet) {\r\n      // Becoming active, take focus\r\n      if (newValue) {\r\n        this.shouldStealFocus = true;\r\n        this.setBackgroundElementStyles(true);\r\n      }\r\n\r\n      // Becoming inactive, return focus\r\n      else {\r\n        this.shouldReturnFocus = true;\r\n        this.setBackgroundElementStyles(false);\r\n      }\r\n\r\n    // Side Sheet modals have four states: inactive, opening, active, and closing.\r\n    } else {\r\n\r\n      // It's a side sheet modal\r\n\r\n      if (newValue) {\r\n        // Side sheet modal becoming active\r\n        this.setBackgroundElementStyles(true);\r\n        this.isAnimating = true;\r\n      }\r\n\r\n      else {\r\n        this.isAnimating = true;\r\n      }\r\n    }\r\n\r\n\r\n  }\r\n\r\n  /**\r\n   * Choose to show the close icon (currently an X) or not\r\n   */\r\n  @Prop() showClose: boolean = true;\r\n\r\n  @State() isAnimating: boolean = false;\r\n\r\n  @State() isOpening: boolean = false;\r\n\r\n  @State() isClosing: boolean = false;\r\n\r\n\r\n  previouslyFocusedElement: HTMLElement = null; // So we can return focus to wherever the user was when the Loading component appeared.\r\n  bodyInnerWrapper: HTMLElement = null; // A div wrapped around everything in the body except the modal. Used to prevent background scrolling.\r\n  shouldStealFocus = false;\r\n  shouldReturnFocus = false;\r\n  hasOpened = false;\r\n  headingId = utils.generateUniqueId();\r\n  \r\n\r\n\r\n  setBackgroundElementStyles(modalIsActivating: boolean) {\r\n    if (modalIsActivating) {\r\n        document.body.classList.add(\"yeti-modal-has_active_modal\");\r\n    } else {\r\n        document.body.classList.remove(\"yeti-modal-has_active_modal\");\r\n    }\r\n  }\r\n\r\n\r\n\r\n  @Listen('keydown', { target: 'window'})\r\n  focusTrap(e) {\r\n\r\n    if (this.isActive && e.keyCode == 27 && this.showClose) { // Escape button\r\n        this.isActive = false;    \r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  @Listen('transitionend')\r\n  handleTransitionEnd(e) {\r\n\r\n    if (!e.propertyName || e.propertyName != \"transform\") {\r\n      return;\r\n    }\r\n\r\n    if (this.isOpening) {\r\n\r\n      // Becoming active, take focus\r\n      this.previouslyFocusedElement = document.activeElement as HTMLElement;\r\n      this.handleInitialFocus();\r\n      this.isOpening = false;\r\n      this.hasOpened = true;\r\n\r\n    } else if (this.isClosing) {\r\n\r\n      this.setBackgroundElementStyles(false);\r\n      if (this.previouslyFocusedElement) {\r\n        this.previouslyFocusedElement.focus();\r\n      }\r\n      this.isClosing = false;\r\n\r\n    }\r\n\r\n    this.isAnimating = false;\r\n\r\n  }\r\n\r\n\r\n\r\n  handleInitialFocus() {\r\n    // Sets focus on the correct thing within the modal's content when it first opens. If nothing is focusable, uses the content area itself.\r\n    let contentArea = this.el.querySelector('.yeti-modal-content') as HTMLElement;\r\n    let firstFocusableContentItem = utils.aria.focusFirstDescendant(contentArea); // either false or an HTMLElement\r\n\r\n    if (!firstFocusableContentItem) {\r\n        // There is nothing focusable within the content of the modal, so make the content area itself focusable.\r\n        contentArea.setAttribute(\"tabIndex\", \"-1\");\r\n        contentArea.focus();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  componentWillLoad() {\r\n    // Set up ids and handle slotted content\r\n    let componentId = this.el.getAttribute(\"id\");\r\n    let content = this.el.querySelector(\"yeti-modal-content\");\r\n    let buttons = this.el.querySelector(\"yeti-modal-buttons\");\r\n    let headerAction = this.el.querySelector(\"yeti-modal-header-action\");\r\n\r\n    if (!content) {\r\n        console.error(\"Yeti Modal components must have a yeti-modal-content element.\");\r\n    } else {\r\n        content.setAttribute(\"slot\", \"content\");\r\n    }\r\n\r\n    if (!buttons) {\r\n        console.error(\"Yeti Modal components must have a yeti-modal-buttons element.\");\r\n    } else {\r\n        buttons.setAttribute(\"slot\", \"buttons\");\r\n    }\r\n\r\n    if (headerAction) {\r\n      headerAction.setAttribute(\"slot\", \"header_action\");\r\n    }\r\n\r\n    if (!componentId || componentId == \"\") {\r\n      componentId = utils.generateUniqueId();\r\n      this.el.setAttribute(\"id\", componentId);\r\n    }\r\n\r\n    if (this.isActive) {\r\n      this.setBackgroundElementStyles(true);\r\n    }\r\n\r\n  }\r\n\r\n\r\n  render() {\r\n\r\n    let modalOverlayCSS = (this.isSideSheet) ? \"yeti-modal_ss-overlay\" : \"yeti-modal-overlay\";\r\n    let modalCSS = `yeti-modal${(this.isSideSheet) ? \" yeti-modal_ss\" : \"\"}`;\r\n    let modalProperties = {\r\n        \"role\": \"dialog\",\r\n        \"aria-modal\": \"true\",\r\n        \"aria-labelledby\": this.headingId\r\n    };\r\n\r\n    if (this.describedBy != \"\") {\r\n        modalProperties[\"aria-describedby\"] = this.describedBy;\r\n    }\r\n\r\n    modalOverlayCSS += (this.isActive || this.isAnimating) ? \"\" : \" yeti-modal-overlay__inert\";\r\n\r\n    modalOverlayCSS += (this.isOpening) ? \" yeti-modal__opening\" : \"\";\r\n    modalOverlayCSS += (this.hasOpened) ? \" yeti-modal__open\" : \"\";\r\n    modalOverlayCSS += (this.isClosing) ? \" yeti-modal__closing\" : \"\";\r\n\r\n    modalCSS += (this.size == \"\") ? \"\" : ` yeti-modal-size-${this.size}`;\r\n\r\n    modalCSS += (this.modalClass != \"\") ? ` ${this.modalClass}` : \"\";\r\n\r\n    modalCSS += (this.isScrollable) ? \"\" : \" yeti-modal__unscrollable\";\r\n\r\n    return (\r\n        <div class={modalOverlayCSS}>\r\n            \r\n            <div class=\"yeti-modal-bumper-front\" tabIndex={0}></div>\r\n\r\n\r\n            <div class={modalCSS} {...modalProperties}>\r\n        \r\n                <div class=\"yeti-modal-header\">\r\n                    <h1 class=\"yeti-modal-header-heading\" id={this.headingId}>{this.heading}</h1>\r\n\r\n                    <div class=\"yeti-modal-header-action\">\r\n                      <slot name=\"header_action\" />\r\n                    </div>\r\n\r\n                    {(this.showClose) ?\r\n\r\n                      <button class=\"yeti-modal-header-close yeti-button-ghost\" onClick={(e) => { e.preventDefault(); this.isActive = false }}>\r\n                      <span class=\"material-icons\">close</span>\r\n                      </button>\r\n\r\n                    :\r\n\r\n                      null\r\n\r\n                    }\r\n                    \r\n                </div>\r\n\r\n        \r\n                <div class=\"yeti-modal-content\">\r\n\r\n                    <div class=\"yeti-modal-content-actual\">\r\n                      \r\n                      <slot name=\"content\" />\r\n                    \r\n                    </div>\r\n                    \r\n        \r\n                    <div class=\"yeti-modal-content-fade\"></div>\r\n        \r\n                </div>\r\n\r\n        \r\n                <div class=\"yeti-modal-actions\">\r\n\r\n                    <div class=\"yeti-modal-actions-buttons\">\r\n                    \r\n                        <slot name=\"buttons\" />\r\n                    \r\n                    </div>\r\n                \r\n                </div>\r\n        \r\n            </div>\r\n\r\n\r\n            <div class=\"yeti-modal-bumper-back\" tabIndex={0}></div>\r\n\r\n        </div>\r\n\r\n    );\r\n  }\r\n\r\n\r\n\r\n  componentDidRender() {\r\n    // Handle focus management. We can't do this when the property changes because the inactive state uses display: none,\r\n    // which interferes with the ability to accept focus depending on some race conditions.\r\n\r\n    // For regular modals...\r\n    if (this.shouldStealFocus) {\r\n      // Becoming active, take focus\r\n      this.previouslyFocusedElement = document.activeElement as HTMLElement;\r\n      this.handleInitialFocus();\r\n    }\r\n\r\n    if (this.shouldReturnFocus) {\r\n      // Becoming inactive, return focus\r\n      if (this.previouslyFocusedElement) {\r\n        this.previouslyFocusedElement.focus();\r\n      }\r\n    }\r\n\r\n    \r\n    // For side sheet modals\r\n    if (this.isAnimating) {\r\n      // It's a side sheet modal, and it's opening. Add the opening class to the overlay to initiate the CSS transition.\r\n      if (this.isActive) {\r\n        setTimeout(() => {\r\n          this.isOpening = true;\r\n          this.isClosing = false;\r\n        }, 1);\r\n      } else {\r\n        setTimeout(() => {\r\n          this.isOpening = false;\r\n          this.hasOpened = false;\r\n          this.isClosing = true;\r\n        }, 1);\r\n      }\r\n      \r\n    }\r\n\r\n    this.shouldStealFocus = false;\r\n    this.shouldReturnFocus = false;\r\n  }\r\n\r\n\r\n\r\n  componentDidLoad() {\r\n    let frontBumper = this.el.querySelector(\".yeti-modal-bumper-front\");\r\n    let backBumper  = this.el.querySelector(\".yeti-modal-bumper-back\");\r\n\r\n    frontBumper.addEventListener(\"focus\", () => {\r\n        utils.aria.focusLastDescendant(this.el.querySelector(\".yeti-modal\"));\r\n    });\r\n\r\n    backBumper.addEventListener(\"focus\", () => {\r\n        utils.aria.focusFirstDescendant(this.el.querySelector(\".yeti-modal\"));\r\n    });\r\n  }\r\n\r\n}"],"names":[],"mappings":"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"}