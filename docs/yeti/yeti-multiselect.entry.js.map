{"file":"yeti-multiselect.entry.esm.js","mappings":"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","names":[],"sources":["src/components/yeti-multiselect/yeti-multiselect.tsx"],"sourcesContent":["import { Component, Prop, h, State, Event, EventEmitter, Element, Listen, /*Watch*/ } from '@stencil/core';\nimport { utils, YetiMultiselectOption } from '../../utils/utils';\n\n@Component({\n  tag: 'yeti-multiselect',\n  shadow: false,\n})\nexport class YetiMultiselect {\n\n  @Element() el: HTMLElement;\n\n  /**\n   * Fires when the user has made a selection and closed the dropdown (usually by focusing elsewhere).\n   */\n  @Event({ bubbles: true }) readyToVerifySlow: EventEmitter<CustomEvent>;\n\n  /**\n   * Fires when the user toggles any of the options.\n   */\n  @Event({ bubbles: true }) readyToVerifyFast: EventEmitter<CustomEvent>;\n\n  /**\n   * CSS classlist to add to the component's outer wrapper element.\n   */\n  @Prop() cssClass: string = '';\n\n  /**\n   * id of the visual representation of the drop-down.\n   */\n  @Prop({\n    mutable: true,\n    reflect: true\n  }) facadeId: string = \"\";\n\n  /**\n   * id of the actual drop-down element.\n   */\n  @Prop({\n    mutable: true,\n    reflect: true\n  }) actualId: string = \"\";\n\n  /**\n   * name of the actual drop-down element. Defaults to match id.\n   */\n  @Prop({\n    mutable: true,\n    reflect: true\n  }) actualName: string = this.actualId;\n\n  /**\n   * Whether the component requires a valid value.\n   */\n  @Prop() required: boolean = false;\n\n  /**\n   * Token list of left | right and/or above | below that describes the drop-down's visual position relative to the closed state anchor.\n   */\n  @Prop() menuAlignment: string = \"\";\n\n  /**\n   * Whether the component has a valid value.\n   */\n  @Prop({\n    mutable: true,\n    reflect: true\n  }) isValid: boolean;\n\n  /**\n   * The component's value is represented as a string of comma-separated values.\n   */\n  @Prop({\n    mutable: true,\n    reflect: true\n  }) value: string = '';\n\n  /**** TODO: handle programmatic value changes: i.e. when controller JS sets [component].value \n  @Watch(\"value\")\n  handleValueChange(newValue: string, oldValue: string) {\n    this.handleProgrammaticValueChange(newValue, oldValue);\n  }*/\n\n  /**\n   * id of an external HTML element that the component's actual drop-down element references in aria-labelledby.\n   */\n  @Prop() labelledBy: string = \"\";\n\n  /**\n   * id of an external HTML element that the component's actual drop-down element references in aria-describedby.\n   */\n  @Prop() describedBy: string = \"\";\n\n  /**\n   * Text that appears in the closed state/anchor when there are no selections.\n   */\n  @Prop() placeholder: string = \"- Select -\";\n\n  /**\n   * Whether or not to show the optional Clear all selections puck.\n   */\n  @Prop() showClear: boolean = true;\n\n  /**\n   * Array of YetiMultiselectOptions that describes the component's internal representation of its options. See utils.js for more detail.\n   */\n  @State() options: YetiMultiselectOption[] = [];\n\n  /**\n   * Whether or not the user has interacted with the component (i.e. focused and blurred).\n   */\n  @State() isTouched: boolean = false;\n\n  /**\n   * Number of total selections (used primarily for the anchor).\n   */\n  @State() numSelections: number = 0;\n\n  /**\n   * Toggle to re-render the whole component.\n   */\n  @State() iLoveJSX: boolean = false;\n\n  /**\n   * Whether or not the drop-down is open/visible or not.\n   */\n  @State() isOpen: boolean = false;\n\n  /**\n   * 0-based index of the currently focused option.\n   */\n  @State() cursorPosition: number = -1;\n\n\n\n  @Listen(\"click\", {\n    target: \"body\"\n  })\n  handleDefocusingClick() {\n    if (this.el.querySelectorAll(\":focus\").length == 0 && this.isOpen) {\n      this.closeFlyout();\n    }\n  }\n\n\n\n  @Listen(\"keydown\")\n  handleKeydown(ev: KeyboardEvent) {\n\n    let key = ev.key.toString().toLowerCase();\n\n    switch (key) {\n\n      // Handle potential tabout\n      case \"tab\": {\n\n        // Normal tab direction\n        if (!ev.shiftKey) {\n\n          if (this.el.querySelectorAll(\".yeti-multiselect:focus\").length == 0) {\n            this.closeFlyout();\n          }\n\n        // Shift tab direction (backwards)\n        } else {\n\n          if (this.el.querySelectorAll(\".yeti-multiselect:focus\").length > 0) {\n            this.closeFlyout();\n          }\n\n        }\n        \n        break;\n      }\n\n\n      // Handle arrow navigation\n      case \"arrowdown\": {\n\n        if (this.isOpen) {\n          this.cursorPosition = (this.cursorPosition + 1) % this.options.length;\n          ev.preventDefault();\n        } else if (ev.altKey) {\n\n          this.openFlyout();\n          ev.preventDefault();\n\n        }\n\n        break;\n      }\n\n\n      // Handle arrow navigation\n      case \"arrowup\": {\n\n        if (this.isOpen) {\n          this.cursorPosition = (this.cursorPosition - 1 + this.options.length) % this.options.length;\n          ev.preventDefault();\n        } else if (ev.altKey) {\n\n          this.openFlyout();\n          ev.preventDefault();\n\n        }\n\n        break;\n      }\n\n\n      // Handle escape navigation\n      case \"escape\": {\n\n        if (this.isOpen) {\n          this.closeFlyout();\n          ev.preventDefault();\n        }\n\n        break;\n      }\n\n\n      // Handle flyout open/close toggling enter/space or selection-making enter/space\n      case \"enter\":\n      case \" \": {\n\n        // Check to see if this happened while selecting something.\n        ev.preventDefault();\n        let target = ev.target as HTMLElement;\n\n        // First check if the clear everything puck has focus\n        if (target.classList.contains(\"yeti-multiselect-puck\")) {\n          target.click();\n          break;\n        } else {\n        // Next check if the cursor is on a selection\n        \n          if (this.cursorPosition >= 0) {\n            // Toggle selection on the option at this cursor position.\n            this.handleOptionClick(this.cursorPosition);\n          } else {\n\n        // User isn't selecting or activating clear puck, so just toggle the flyout open/close state.\n            this.toggleFlyout();\n          }\n        }\n\n        break;\n      }\n\n    }\n  }\n\n\n\n  openFlyout() {\n    this.isOpen = true;\n  }\n\n\n\n  closeFlyout() {\n    this.isOpen = false;\n    this.cursorPosition = -1;\n    this.isTouched = true;\n    this.readyToVerifySlow.emit();\n  }\n\n\n\n  toggleFlyout() {\n    if (this.isOpen) {\n      this.closeFlyout()\n    } else {\n      this.openFlyout();\n    }\n  }\n\n\n\n  handleFieldBlur(ev) {\n    this.isTouched = true;\n    this.readyToVerifySlow.emit(ev);\n  }\n\n\n\n  parseOptionElements(options: HTMLCollection) {\n\n    for (let i = 0; i < options.length; i++) {\n      \n      let option = options.item(i);\n      \n      // First, confirm this element is indeed a yeti-multiselect-option element.\n      if (option.tagName.toLowerCase() == 'yeti-multiselect-option') {\n\n        let optionId;\n\n        if (option.hasAttribute(\"id\")) {\n          optionId = option.getAttribute(\"id\");\n        } else {\n          optionId = `${this.el.getAttribute(\"id\")}_option${i}`;\n        }\n\n        this.options.push({\n          selected: option.hasAttribute(\"selected\"),\n          label: option.innerHTML,\n          id: optionId\n        });\n\n        if (option.hasAttribute(\"selected\")) {\n          ++this.numSelections;\n        }\n\n      }\n\n    } // End for\n\n    // Finally, we need to remove the option elements.\n    for (let j = options.length - 1; j >= 0; --j) {\n      options.item(j).remove();\n    }\n\n  }\n\n\n\n  getPlaceholderDisplay() {\n    // Returns the string of text that should go in the placeholder area.\n    switch (this.numSelections) {\n\n      case 0:\n        return this.placeholder;\n\n      case 1:\n        for (let i=0; i < this.options.length; i++) {\n          \n          if (this.options[i].selected) {\n            return this.options[i].label;\n          }\n\n        }\n\n      default: // Multiple selections\n        return `${this.numSelections} selections`;\n    }\n  }\n\n\n\n  renderActualOptions() {\n    // Creates the <option>s for the actual <select>.\n    let optionsActual = [];\n    for (let i=0; i<this.options.length; i++) {\n      let optionActual = <option value={this.options[i].label} selected={this.options[i].selected}>{this.options[i].label}</option>;\n      optionsActual.push(optionActual);\n    }\n\n    return optionsActual;\n  }\n\n\n\n  handleOptionClick(i: number) {\n    // i = options index\n    let newValue = [];\n    this.numSelections = (this.options[i].selected) ? --this.numSelections : ++this.numSelections;\n    this.options[i].selected = !this.options[i].selected;\n    for (let j = 0; j < this.options.length; j++) {\n      if (this.options[j].selected) {\n        newValue.push(this.options[j].label);\n      }\n    }\n    this.value = newValue.toString();\n    this.iLoveJSX = !this.iLoveJSX; // Trigger re-render\n    this.readyToVerifyFast.emit();\n  }\n\n\n\n  handleClearSelections(ev: Event) {\n    let fieldElement = this.el.querySelector(\".yeti-multiselect\") as HTMLElement;\n    for (let i=0; i<this.options.length; i++) {\n      this.options[i].selected = false;\n    }\n    this.value = \"\";\n    this.numSelections = 0;\n    fieldElement.focus();\n    ev.stopPropagation();\n    this.readyToVerifySlow.emit();\n    this.readyToVerifyFast.emit();\n  }\n\n\n\n  handleActualFocus() {\n    let facade = this.el.querySelector(\".yeti-multiselect\") as HTMLElement;\n    if (facade) {\n      facade.focus();\n    }\n  }\n\n\n\n  //handleProgrammaticValueChange(newValue: string, oldValue: string) {\n    // Usually you'd pre-set the value of the control by specifying the selected attribute of yeti-multiselect-option, however it can also be\n    // set programmatically via the value property of the component.\n    \n    //console.log(`Value should change from ${oldValue} to ${newValue}`);\n  //}\n\n\n\n  componentWillLoad() {\n    // Set up ids and handle any <yeti-multiselect-option> elements\n    let optionElements = this.el.children;\n\n    // Set up ids\n    let componentId = this.el.getAttribute(\"id\");\n\n    if (!componentId || componentId == \"\") {\n      componentId = utils.generateUniqueId();\n      this.el.setAttribute(\"id\", componentId);\n    }\n\n    this.actualId = (this.actualId != \"\") ? this.actualId : `${componentId}_actual`;\n    this.actualName = this.actualId;\n\n    this.facadeId = (this.facadeId != \"\") ? this.facadeId : `${componentId}_facade`;\n    \n\n    // Handle any <yeti-multiselect-option> elements\n    if (this.el.hasAttribute(\"id\") && this.el.getAttribute(\"id\") != \"\") { \n      this.el.getAttribute(\"id\");\n    } else {\n      this.el.setAttribute(\"id\", utils.generateUniqueId());\n    }\n\n    // Look for and handle any <yeti-multiselect-option> elements.\n    if (optionElements.length > 0) {\n      \n      this.parseOptionElements(optionElements);\n\n    }\n  }\n\n\n\n  componentWillRender() {\n    if (this.value == \"\") {\n      for (let i=0; i<this.options.length; i++) {\n        this.options[i].selected = false;\n      }\n      this.value = \"\";\n      this.numSelections = 0;\n    }\n  }\n\n\n\n  componentDidRender() {\n    // If the cursor is over an option, make sure it's visible.\n    if (this.isOpen) {\n      // The facade flyout is open. If one of the options is being hovered over then we want to scroll it into view.\n      // If not, then we'll scroll the whole flyout into view.\n      let flyout = this.el.querySelector(\".yeti-multiselect-flyout\");\n      let hoveredOption = this.el.querySelector(\".yeti-multiselect-option__hover\");\n      let thingToScrollIntoView = (hoveredOption) ? hoveredOption : flyout;\n      thingToScrollIntoView.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"nearest\"\n      });\n    }\n  }\n\n\n\n  render() {\n\n    let cssClasses = 'yeti-multiselect';\n    let flyoutClass = 'yeti-multiselect-flyout';\n\n    if (this.cssClass != '') {\n      cssClasses += ' ' + this.cssClass;\n    }\n\n    if (this.isValid == false) {\n      cssClasses += ' yeti-multiselect__error';\n    }\n\n    flyoutClass += (this.isOpen) ? \" yeti-multiselect-flyout__open\" : \"\";\n\n    if (this.menuAlignment == \"right\") {\n      flyoutClass += ' yeti-multiselect-flyout-align-right'\n    }\n\n    return ([\n      <div class=\"yeti-multiselect-wrapper\">\n\n        <select\n          tabIndex={-1}\n          class=\"yeti-multiselect-actual yeti-a11y-hidden\"\n          multiple={true}\n          id={this.actualId}\n          name={this.actualName}\n          onFocus={() => {this.handleActualFocus()}}\n          {...((!this.isValid) ? {\"aria-invalid\": true} : {})}\n          {...((this.labelledBy != \"\") ? {\"aria-labelledby\": this.labelledBy} : {})}\n          {...((this.describedBy != \"\") ? {\"aria-describedby\": this.describedBy} : {})}\n        >\n          \n          {this.renderActualOptions()}\n\n        </select>\n\n        <div \n          tabIndex={0}\n          class={cssClasses}\n          onClick={() => {\n            this.isOpen = !this.isOpen;\n          }}\n          onFocus={() => {\n            this.isTouched = true;\n          }}\n          aria-hidden=\"true\"\n        >\n\n          <span class=\"yeti-multiselect-placeholder\" title={this.getPlaceholderDisplay()}>{this.getPlaceholderDisplay()}</span>\n\n          { (this.showClear && this.numSelections > 0) ? \n\n            (<button class=\"yeti-multiselect-puck\" title=\"Clear all selections\" onClick={ (ev) => { this.handleClearSelections(ev); ev.preventDefault() }}>\n              <span class=\"material-icons yeti-multiselect-puck-icon\" aria-hidden=\"true\">cancel</span>\n            </button>)\n\n          :\n\n            \"\"\n\n          }\n\n        </div>\n\n        \n        <div class={flyoutClass} aria-hidden=\"true\">\n        \n          <ul\n            class=\"yeti-multiselect-options\"\n            id={this.facadeId}\n          >\n\n            {this.options.map((option, i) => {\n\n                let optionClass = (this.cursorPosition == i) ? \"yeti-multiselect-option yeti-multiselect-option__hover\" : \"yeti-multiselect-option\";\n              \n                return (\n                  <li id={option.id} key={option.id}>\n                    <button class={optionClass} tabIndex={-1} onClick={(ev) => { this.handleOptionClick(i); ev.preventDefault(); }}>\n                      <span class=\"yeti-multiselect-option-checkbox\">\n                        <span class=\"material-icons\">{(option.selected) ? \"check_box\" : \"check_box_outline_blank\"}</span>\n                      </span>\n                      <span class=\"yeti-multiselect-option-label\">{option.label}</span>\n                    </button>\n                  </li>\n                )\n              }\n            \n            )}\n\n          </ul>\n\n        </div>\n\n      </div>\n    ]);\n  }\n\n}"],"version":3}