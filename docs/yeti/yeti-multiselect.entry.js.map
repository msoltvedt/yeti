{"file":"yeti-multiselect.entry.esm.js","mappings":"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","names":[],"sources":["src/components/yeti-multiselect/yeti-multiselect.tsx"],"sourcesContent":["import { Component, Prop, h, State, Event, EventEmitter, Element, Listen, /*Watch*/ } from '@stencil/core';\r\nimport { utils, YetiMultiselectOption } from '../../utils/utils';\r\n\r\n@Component({\r\n  tag: 'yeti-multiselect',\r\n  shadow: false,\r\n})\r\nexport class YetiMultiselect {\r\n\r\n  @Element() el: HTMLElement;\r\n\r\n  /**\r\n   * Fires when the user has made a selection and closed the dropdown (usually by focusing elsewhere).\r\n   */\r\n  @Event({ bubbles: true }) readyToVerifySlow: EventEmitter<CustomEvent>;\r\n\r\n  /**\r\n   * Fires when the user toggles any of the options.\r\n   */\r\n  @Event({ bubbles: true }) readyToVerifyFast: EventEmitter<CustomEvent>;\r\n\r\n  /**\r\n   * CSS classlist to add to the component's outer wrapper element.\r\n   */\r\n  @Prop() wrapperClass: string = '';\r\n\r\n  /**\r\n   * id of the combobox element.\r\n   */\r\n  @Prop({\r\n    mutable: true,\r\n    reflect: true\r\n  }) comboboxId: string = \"\"; // Will be initialized on load (if necessary).\r\n\r\n  /**\r\n   * id of the drop-down element.\r\n   */\r\n  @Prop({\r\n    mutable: true,\r\n    reflect: true\r\n  }) flyoutId: string = \"\"; // Will be initialized on load (if necessary).\r\n\r\n  /**\r\n   * form's name for the actual drop-down element. Defaults to match id.\r\n   */\r\n  @Prop({\r\n    mutable: true,\r\n    reflect: true\r\n  }) formName: string = \"\"; // Will be initialized on load (if necessary).\r\n\r\n  /**\r\n   * Whether the component requires a valid value.\r\n   */\r\n  @Prop() required: boolean = false;\r\n\r\n  /**\r\n   * Token list of left | right and/or above | below that describes the drop-down's visual position relative to the closed state anchor.\r\n   */\r\n  @Prop() menuAlignment: string = \"\";\r\n\r\n  /**\r\n   * Whether the component has a valid value.\r\n   */\r\n  @Prop({\r\n    mutable: true,\r\n    reflect: true\r\n  }) isValid: boolean = true;\r\n\r\n  /**\r\n   * The component's value is represented as a string of comma-separated values.\r\n   */\r\n  @Prop({\r\n    mutable: true,\r\n    reflect: true\r\n  }) value: string = '';\r\n\r\n  /**** TODO: handle programmatic value changes: i.e. when controller JS sets [component].value \r\n  @Watch(\"value\")\r\n  handleValueChange(newValue: string, oldValue: string) {\r\n    this.handleProgrammaticValueChange(newValue, oldValue);\r\n  }*/\r\n\r\n  /**\r\n   * id of an external HTML element that the component's actual drop-down element references in aria-labelledby.\r\n   */\r\n  @Prop() labelledBy: string = \"\";\r\n\r\n  /**\r\n   * id of an external HTML element that the component's actual drop-down element references in aria-describedby.\r\n   */\r\n  @Prop() describedBy: string = \"\";\r\n\r\n  /**\r\n   * Text that appears in the closed state/anchor when there are no selections.\r\n   */\r\n  @Prop() placeholder: string = \"- Select -\";\r\n\r\n  /**\r\n   * Whether or not to show the optional Clear all selections puck.\r\n   */\r\n  @Prop() showClear: boolean = true;\r\n\r\n  /**\r\n   * Array of YetiMultiselectOptions that describes the component's internal representation of its options. See utils.js for more detail.\r\n   */\r\n  @State() options: YetiMultiselectOption[] = [];\r\n\r\n  /**\r\n   * Whether or not the user has interacted with the component (i.e. focused and blurred).\r\n   */\r\n  @State() isTouched: boolean = false;\r\n\r\n  /**\r\n   * Number of total selections (used primarily for the anchor).\r\n   */\r\n  @State() numSelections: number = 0;\r\n\r\n  /**\r\n   * Toggle to re-render the whole component.\r\n   */\r\n  @State() iLoveJSX: boolean = false;\r\n\r\n  /**\r\n   * Whether or not the drop-down is open/visible or not.\r\n   */\r\n  @State() isOpen: boolean = false;\r\n\r\n  /**\r\n   * 0-based index of the currently focused option.\r\n   */\r\n  @State() cursorPosition: number = -1;\r\n\r\n\r\n\r\n  @Listen(\"click\", {\r\n    target: \"body\"\r\n  })\r\n  handleDefocusingClick() {\r\n    if (this.el.querySelectorAll(\":focus\").length == 0 && this.isOpen) {\r\n      this.closeFlyout();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  @Listen(\"keydown\")\r\n  handleKeydown(ev: KeyboardEvent) {\r\n\r\n    let key = ev.key.toString().toLowerCase();\r\n\r\n    switch (key) {\r\n\r\n      // Handle potential tabout\r\n      case \"tab\": {\r\n\r\n        // Normal tab direction\r\n        if (!ev.shiftKey) {\r\n\r\n          if (this.el.querySelectorAll(\".yeti-multiselect:focus\").length == 0) {\r\n            this.closeFlyout();\r\n          }\r\n\r\n        // Shift tab direction (backwards)\r\n        } else {\r\n\r\n          if (this.el.querySelectorAll(\".yeti-multiselect:focus\").length > 0) {\r\n            this.closeFlyout();\r\n          }\r\n\r\n        }\r\n        \r\n        break;\r\n      }\r\n\r\n\r\n      // Handle arrow navigation\r\n      case \"arrowdown\": {\r\n\r\n        if (this.isOpen) {\r\n          this.cursorPosition = (this.cursorPosition + 1) % this.options.length;\r\n          ev.preventDefault();\r\n        } else if (ev.altKey) {\r\n\r\n          this.cursorPosition = 0;\r\n          this.openFlyout();\r\n          ev.preventDefault();\r\n\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n\r\n      // Handle arrow navigation\r\n      case \"arrowup\": {\r\n\r\n        if (this.isOpen) {\r\n          this.cursorPosition = (this.cursorPosition - 1 + this.options.length) % this.options.length;\r\n          ev.preventDefault();\r\n        } else if (ev.altKey) {\r\n\r\n          this.openFlyout();\r\n          ev.preventDefault();\r\n\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n\r\n      // Handle escape navigation\r\n      case \"escape\": {\r\n\r\n        if (this.isOpen) {\r\n          this.closeFlyout();\r\n          ev.preventDefault();\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n\r\n      // Handle flyout open/close toggling enter/space or selection-making enter/space\r\n      case \"enter\":\r\n      case \" \": {\r\n\r\n        // Check to see if this happened while selecting something.\r\n        ev.preventDefault();\r\n        let target = ev.target as HTMLElement;\r\n\r\n        // First check if the clear everything puck has focus\r\n        if (target.classList.contains(\"yeti-multiselect-puck\")) {\r\n          target.click();\r\n          break;\r\n        } else {\r\n        // Next check if the cursor is on a selection\r\n        \r\n          if (this.cursorPosition >= 0) {\r\n            // Toggle selection on the option at this cursor position.\r\n            this.handleOptionClick(this.cursorPosition);\r\n          } else {\r\n\r\n        // User isn't selecting or activating clear puck, so just toggle the flyout open/close state.\r\n            this.toggleFlyout();\r\n          }\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n\r\n\r\n  openFlyout() {\r\n    this.isOpen = true;\r\n  }\r\n\r\n\r\n\r\n  closeFlyout() {\r\n    this.isOpen = false;\r\n    this.cursorPosition = -1;\r\n    this.isTouched = true;\r\n    this.readyToVerifySlow.emit();\r\n  }\r\n\r\n\r\n\r\n  toggleFlyout() {\r\n    if (this.isOpen) {\r\n      this.closeFlyout()\r\n    } else {\r\n      this.openFlyout();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  handleFieldBlur(ev) {\r\n    this.isTouched = true;\r\n    this.readyToVerifySlow.emit(ev);\r\n  }\r\n\r\n\r\n\r\n  parseOptionElements(options: HTMLCollection) {\r\n\r\n    let runningInitialValueArray = [];\r\n\r\n    for (let i = 0; i < options.length; i++) {\r\n      \r\n      let option = options.item(i);\r\n      \r\n      // First, confirm this element is indeed a yeti-multiselect-option element.\r\n      if (option.tagName.toLowerCase() == 'yeti-multiselect-option') {\r\n\r\n        let optionId;\r\n\r\n        if (option.hasAttribute(\"id\")) {\r\n          optionId = option.getAttribute(\"id\");\r\n        } else {\r\n          optionId = `${this.el.getAttribute(\"id\")}_option${i}`;\r\n        }\r\n\r\n        this.options.push({\r\n          selected: option.hasAttribute(\"selected\"),\r\n          label: option.innerHTML,\r\n          id: optionId\r\n        });\r\n\r\n        if (option.hasAttribute(\"selected\")) {\r\n          ++this.numSelections;\r\n          runningInitialValueArray.push(option.innerHTML);\r\n        }\r\n\r\n      }\r\n\r\n    } // End for\r\n\r\n    // Initialize value\r\n    this.value = runningInitialValueArray.toString();\r\n\r\n    // Finally, we need to remove the option elements.\r\n    for (let j = options.length - 1; j >= 0; --j) {\r\n      options.item(j).remove();\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  getPlaceholderDisplay() {\r\n    // Returns the string of text that should go in the placeholder area.\r\n    switch (this.numSelections) {\r\n\r\n      case 0:\r\n        return this.placeholder;\r\n\r\n      case 1:\r\n        for (let i=0; i < this.options.length; i++) {\r\n          \r\n          if (this.options[i].selected) {\r\n            return this.options[i].label;\r\n          }\r\n\r\n        }\r\n\r\n      default: // Multiple selections\r\n        return `${this.numSelections} selections`;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  handleOptionClick(i: number) {\r\n    // i = options index\r\n    let newValue = [];\r\n    this.numSelections = (this.options[i].selected) ? --this.numSelections : ++this.numSelections;\r\n    this.options[i].selected = !this.options[i].selected;\r\n    for (let j = 0; j < this.options.length; j++) {\r\n      if (this.options[j].selected) {\r\n        newValue.push(this.options[j].label);\r\n      }\r\n    }\r\n    this.value = newValue.toString();\r\n    this.iLoveJSX = !this.iLoveJSX; // Trigger re-render\r\n    this.readyToVerifyFast.emit();\r\n  }\r\n\r\n\r\n\r\n  handleClearSelections(ev: Event) {\r\n    let fieldElement = this.el.querySelector(\".yeti-multiselect\") as HTMLElement;\r\n    for (let i=0; i<this.options.length; i++) {\r\n      this.options[i].selected = false;\r\n    }\r\n    this.value = \"\";\r\n    this.numSelections = 0;\r\n    fieldElement.focus();\r\n    ev.stopPropagation();\r\n    this.readyToVerifySlow.emit();\r\n    this.readyToVerifyFast.emit();\r\n  }\r\n\r\n\r\n\r\n  //handleProgrammaticValueChange(newValue: string, oldValue: string) {\r\n    // Usually you'd pre-set the value of the control by specifying the selected attribute of yeti-multiselect-option, however it can also be\r\n    // set programmatically via the value property of the component.\r\n    \r\n    //console.log(`Value should change from ${oldValue} to ${newValue}`);\r\n  //}\r\n\r\n\r\n\r\n  componentWillLoad() {\r\n    // Set up ids and handle any <yeti-multiselect-option> elements\r\n    let optionElements = this.el.children;\r\n\r\n    // Set up ids\r\n    let componentId = this.el.getAttribute(\"id\");\r\n\r\n    if (!componentId || componentId == \"\") {\r\n      componentId = utils.generateUniqueId();\r\n      this.el.setAttribute(\"id\", componentId);\r\n    }\r\n\r\n    this.comboboxId = (this.comboboxId != \"\") ? this.comboboxId : `${componentId}_combobox`;\r\n    this.formName = (this.formName != \"\") ? this.formName : componentId;\r\n\r\n    this.flyoutId = (this.flyoutId != \"\") ? this.flyoutId : `${componentId}_flyout`;\r\n\r\n\r\n    // Look for and handle any <yeti-multiselect-option> elements.\r\n    if (optionElements.length > 0) {\r\n      \r\n      this.parseOptionElements(optionElements);\r\n\r\n    }\r\n  }\r\n\r\n\r\n\r\n  componentDidRender() {\r\n    // If the cursor is over an option, make sure it's visible.\r\n    if (this.isOpen) {\r\n      // The flyout is open. If one of the options is being hovered over then we want to scroll it into view.\r\n      // If not, then we'll scroll the whole flyout into view.\r\n      let flyout = this.el.querySelector(\".yeti-multiselect-flyout\");\r\n      let hoveredOption = this.el.querySelector(\".yeti-multiselect-option__hover\");\r\n      let thingToScrollIntoView = (hoveredOption) ? hoveredOption : flyout;\r\n      thingToScrollIntoView.scrollIntoView({\r\n        behavior: \"smooth\",\r\n        block: \"nearest\"\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n\r\n    let comboboxClasses = 'yeti-multiselect';\r\n    let flyoutClass = 'yeti-multiselect-flyout';\r\n\r\n    if (this.wrapperClass != '') {\r\n      comboboxClasses += ' ' + this.wrapperClass;\r\n    }\r\n\r\n    if (this.isValid == false) {\r\n      comboboxClasses += ' yeti-multiselect__error';\r\n    }\r\n\r\n    flyoutClass += (this.isOpen) ? \" yeti-multiselect-flyout__open\" : \"\";\r\n\r\n    if (this.menuAlignment == \"right\") {\r\n      flyoutClass += ' yeti-multiselect-flyout-align-right'\r\n    }\r\n\r\n    return ([\r\n      <div class=\"yeti-multiselect-wrapper\">\r\n\r\n        <div \r\n          tabIndex={0}\r\n          class={comboboxClasses}\r\n          onClick={() => {\r\n            this.isOpen = !this.isOpen;\r\n          }}\r\n          onFocus={() => {\r\n            this.isTouched = true;\r\n          }}\r\n          role=\"combobox\"\r\n          {...((!this.isValid) ? {\"aria-invalid\": 'true'} : {})}\r\n          {...((this.labelledBy != \"\") ? {\"aria-labeledby\": this.labelledBy} : {})}\r\n          {...((this.describedBy != \"\") ? {\"aria-describedby\": this.describedBy} : {})}\r\n          aria-controls={this.flyoutId}\r\n          aria-expanded={this.isOpen}\r\n          aria-haspopup=\"listbox\"\r\n          {...((this.isOpen && this.cursorPosition >= 0) ? { \"aria-activedescendant\": this.options[this.cursorPosition].id } : {})}\r\n          id={this.comboboxId}\r\n        >\r\n\r\n          <span \r\n            class=\"yeti-multiselect-placeholder\"\r\n            title={this.getPlaceholderDisplay()}\r\n          >{this.getPlaceholderDisplay()}\r\n          \r\n          {(this.numSelections > 1) ?\r\n            <span class=\"yeti-a11y-hidden\">{this.value}</span>\r\n          :\r\n            \"\"\r\n          }\r\n          </span>\r\n\r\n\r\n          { (this.showClear && this.numSelections > 0) ? \r\n\r\n            (<button class=\"yeti-multiselect-puck\" title=\"Clear all selections\" onClick={ (ev) => { this.handleClearSelections(ev); ev.preventDefault() }}>\r\n              <span class=\"yeti-a11y-hidden\">Clear all selections</span>\r\n              <span class=\"material-icons yeti-multiselect-puck-icon\" aria-hidden=\"true\">cancel</span>\r\n            </button>)\r\n\r\n          :\r\n\r\n            \"\"\r\n\r\n          }\r\n\r\n        </div>\r\n\r\n        \r\n        <div class={flyoutClass}>\r\n        \r\n          <ul\r\n            class=\"yeti-multiselect-options\"\r\n            id={this.flyoutId}\r\n            role=\"listbox\"\r\n            aria-multiselectable=\"true\"\r\n            {...((this.labelledBy != \"\") ? {\"aria-labeledby\": this.labelledBy} : {})}\r\n            {...((this.isOpen && this.cursorPosition >= 0) ? { \"aria-activedescendant\": this.options[this.cursorPosition].id } : {})}\r\n          >\r\n\r\n            {this.options.map((option, i) => {\r\n\r\n                let optionClass = (this.cursorPosition == i) ? \"yeti-multiselect-option yeti-multiselect-option__hover\" : \"yeti-multiselect-option\";\r\n              \r\n                return (\r\n                  <li \r\n                    id={option.id} \r\n                    key={option.id}\r\n                    role=\"option\"\r\n                    aria-selected={`${option.selected}`}\r\n                  >\r\n                    <button class={optionClass} tabIndex={-1} onClick={(ev) => { this.handleOptionClick(i); ev.preventDefault(); }}>\r\n                      <span class=\"yeti-multiselect-option-checkbox\">\r\n                        <span class=\"material-icons\" aria-hidden=\"true\">{(option.selected) ? \"check_box\" : \"check_box_outline_blank\"}</span>\r\n                      </span>\r\n                      <span class=\"yeti-multiselect-option-label\">{option.label}</span>\r\n                    </button>\r\n                  </li>\r\n                )\r\n              }\r\n            \r\n            )}\r\n\r\n          </ul>\r\n\r\n        </div>\r\n\r\n      </div>\r\n    ]);\r\n  }\r\n\r\n}"],"version":3}