{"file":"yeti-reorderer.entry.esm.js","mappings":"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","names":[],"sources":["src/components/yeti-reorderer/yeti-reorderer.tsx"],"sourcesContent":["import { Component, Prop, h, State, Element, Event, EventEmitter, Listen } from '@stencil/core';\nimport { utils } from '../../utils/utils';\n\n@Component({\n  tag: 'yeti-reorderer',\n  shadow: false,\n})\nexport class YetiReorderer {\n\n  @Element() el: HTMLElement;\n\n\n  @Event() reorderCompleted: EventEmitter;\n\n\n  /**\n   * CSS class list that should apply to the top-most wrapper element.\n   */\n  @Prop() wrapperClass: string = '';\n\n  /**\n   * Used to toggle a re-render of the icon.\n   */\n  @State() iLoveJSX: boolean = false;\n\n\n  @Listen(\"reorderRequested\")\n  handleReorderRequested(event) {\n    let mover = this.el.querySelector(`#${event.detail.assignedId}`);\n    let moverPosition = event.detail.position;\n    let moverChild = mover.querySelector(\".yeti-reorderee\") as HTMLElement;\n    let moverRect = moverChild.getBoundingClientRect();\n    let isUp = event.detail.isUp;\n    let swapeePosition = (isUp) ? moverPosition - 1 : moverPosition + 1;\n    let swapee = this.el.querySelector(`[position='${swapeePosition}']`);\n    let swapeeChild = swapee.querySelector(\".yeti-reorderee\") as HTMLElement;\n    let swapeeRect = swapeeChild.getBoundingClientRect();\n    let moverYDelta = (isUp) ? swapeeRect.y - moverRect.y : /* i.e. just move it up to where the swapee is */\n      swapeeRect.height + (swapeeRect.y - moverRect.y - moverRect.height); // Move it down by height of swapee + distance between mover and swapee.\n    let swapeeYDelta = (isUp) ? moverRect.height + (moverRect.y - swapeeRect.y - swapeeRect.height) : moverRect.y - swapeeRect.y;\n    let that = this; // So we can reference the class object inside a proper function later on.\n\n    if (event.detail.isDisabled) {\n      // This is just to be safe; Reorderee should never emit a reorderRequested event on a disabled trigger.\n      return;\n    }\n    \n    // Move mover into swapee's place\n    moverChild.addEventListener('transitionend', handleTransitionEnd);\n    moverChild.style.setProperty('transition', 'transform 300ms');\n    swapeeChild.style.setProperty('transition', 'transform 300ms');\n    moverChild.style.setProperty('transform', `translateY(${moverYDelta}px)`);\n    swapeeChild.style.setProperty('transform', `translateY(${swapeeYDelta}px)`);\n\n    function handleTransitionEnd() {\n      let placement = ((isUp) ? 'beforebegin' : 'afterend') as InsertPosition;\n      swapee.insertAdjacentElement(placement, mover);\n      moverChild.style.removeProperty('transition');\n      swapeeChild.style.removeProperty('transition');\n      moverChild.style.removeProperty('transform');\n      swapeeChild.style.removeProperty('transform');\n      \n      // Update positions\n      mover.attributes[\"position\"].value = swapeePosition;\n      swapee.attributes[\"position\"].value = moverPosition;\n\n      // Detach listener\n      moverChild.removeEventListener('transitionend', handleTransitionEnd);\n\n      // Notify of completion\n      that.reorderCompleted.emit();\n    }\n\n  } \n\n\n\n  componentWillLoad() {\n    // Set up ids for this instance and its child yeti-reorderees. Set position and reorderees attributes for children.\n    let reorderees = this.el.querySelectorAll(\"yeti-reorderee\");\n    let myId = (this.el.id) ? this.el.id : utils.generateUniqueId();\n\n    if (typeof reorderees == 'undefined' || !reorderees.length || reorderees.length < 1) {\n      console.warn(\"yeti-reorderer should contain at least one yeti-reorderee element.\");\n      return;\n    }\n\n    for (let i = 0; i < reorderees.length; i++) {\n      reorderees[i].assignedId = reorderees[i].id = `${myId}_reorderee_${i}`;\n      reorderees[i].position = i;\n      reorderees[i].reorderees = reorderees.length;\n    }\n\n  }\n\n\n\n  render() {\n\n    let wrapperClass = \"yeti-reorderer\";\n\n    if (this.wrapperClass != '') {\n      wrapperClass += ` ${this.wrapperClass}`;\n    }\n\n    return (\n\n        <ul class={wrapperClass}><slot /></ul>\n\n    );\n  }\n\n}"],"version":3}