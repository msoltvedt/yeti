{"version":3,"names":["YetiAccordion","handleAccordionActionClicked","e","detail","actionType","sectionIndex","this","openSection","parseInt","sections","sectionStatus","handleAccordionSectionHeaderClick","clickedSection","section","isOpenable","openIndex","isOpen","suppliedIndex","sectionElements","forEach","index","sectionHeader","querySelector","setAttribute","setTimeout","focus","componentWillLoad","el","querySelectorAll","length","hasAttribute","utils","generateUniqueId","console","error","sectionElement","getAttribute","isWizard","render","h","key","class"],"sources":["src/components/yeti-accordion/yeti-accordion.tsx"],"sourcesContent":["import { Component, Prop, h, State, Element, Listen } from '@stencil/core';\r\nimport { utils } from '../../utils/utils';\r\n\r\n@Component({\r\n  tag: 'yeti-accordion',\r\n  shadow: false,\r\n})\r\nexport class YetiAccordion {\r\n\r\n  @Element() el: HTMLElement;\r\n\r\n  /**\r\n   * The 0-based index of the open section.\r\n   */\r\n  @Prop({\r\n    mutable: true,\r\n    reflect: true\r\n  }) openIndex: number = 0;\r\n\r\n  /**\r\n   * The total number of sections the Accordion has.\r\n   */\r\n  @Prop({\r\n    mutable: true,\r\n    reflect: true\r\n  }) sections: number = 0;\r\n\r\n  /**\r\n   * A list of the Accordion's yeti-accordion-section child elements\r\n   */\r\n  @Prop({\r\n    mutable: true\r\n  }) sectionElements: NodeList = null;\r\n\r\n  /**\r\n   * Whether or not to use wizard mode, in which you can only open one section at a time, and you have to go in order\r\n   */\r\n  @Prop() isWizard: boolean = false;\r\n\r\n  /**\r\n   * Used to toggle a re-render of the icon.\r\n   */\r\n  @State() iLoveJSX: boolean = false;\r\n\r\n\r\n\r\n  @Listen('accordionActionClick')\r\n  handleAccordionActionClicked(e) {\r\n\r\n    switch (e.detail.actionType) {\r\n\r\n      case \"previous\": {\r\n        if (e.detail.sectionIndex > 0) {\r\n          this.openSection(parseInt(e.detail.sectionIndex) - 1);\r\n        }\r\n        break;\r\n      }\r\n\r\n      case \"next\": {\r\n        if (e.detail.sectionIndex < this.sections-1 && e.detail.sectionStatus != \"error\") {\r\n          this.openSection(parseInt(e.detail.sectionIndex) + 1);\r\n        }\r\n        break;\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n\r\n\r\n  @Listen('accordionSectionHeaderClick')\r\n  handleAccordionSectionHeaderClick(e) {\r\n\r\n    // User clicked on a section heading, toggle this pane's state and set the others accordingly.\r\n    let clickedSection = e.detail.section;\r\n\r\n    // First make sure it's openable\r\n    if (!clickedSection.isOpenable) {\r\n      this.openSection(this.openIndex); // It wasn't, so just open whatever we previously had as the open section.\r\n      return;\r\n    }\r\n\r\n    else {\r\n      if (clickedSection.isOpen) {\r\n        clickedSection.isOpen = false;\r\n      } else {\r\n        this.openSection(e.detail.sectionIndex);\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  openSection(suppliedIndex: number = 0) {\r\n    // Opens the section at suppliedIndex while closing the other sections.\r\n    this.sectionElements.forEach((sectionElements, index) => {\r\n      let section = sectionElements as HTMLElement;\r\n      let sectionHeader = section.querySelector(\".yeti-accordion-section-heading\") as HTMLElement;\r\n\r\n      if (index == suppliedIndex) {\r\n        section.setAttribute(\"is-open\", \"true\");\r\n        this.openIndex = index;\r\n        setTimeout(() => { \r\n          sectionHeader?.focus();\r\n        }, 100);\r\n      } else {\r\n        section.setAttribute(\"is-open\", \"false\");\r\n      }\r\n\r\n      // Set the Openable state\r\n      //section.setAttribute(\"is-openable\", `${ (index <= suppliedIndex)  ||  !this.isWizard }`);\r\n\r\n    });\r\n\r\n    this.openIndex = suppliedIndex;\r\n  }\r\n\r\n\r\n\r\n  componentWillLoad() {\r\n    // Populate the sectionElements array and do some initial set-up.\r\n    this.sectionElements = this.el.querySelectorAll('yeti-accordion-section');\r\n    this.sections = this.sectionElements.length;\r\n\r\n    if (!this.el.hasAttribute(\"id\")) {\r\n      this.el.setAttribute(\"id\", utils.generateUniqueId());\r\n    }\r\n\r\n    if (!this.sectionElements || this.sectionElements.length < 2) {\r\n      console.error(\"Yeti Accordion must have at least two yeti-accordion-section elements.\");\r\n      return;\r\n    }\r\n\r\n    this.sectionElements.forEach((sectionElement, index) => {\r\n\r\n      let section = (sectionElement as HTMLElement);\r\n\r\n      section.setAttribute(\"is-open\", `${(index == 0)}`);\r\n      section.setAttribute(\"index\", `${index}`);\r\n      section.setAttribute(\"of\", `${this.sectionElements.length}`);\r\n      section.setAttribute(\"is-openable\", `${section.hasAttribute(\"is-openable\") ? section.getAttribute(\"is-openable\") : (index == 0)}`);\r\n      section.setAttribute(\"is-in-wizard\", `${this.isWizard}`);\r\n\r\n    });\r\n\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n\r\n    return (\r\n\r\n        <div class=\"yeti-accordion\">\r\n\r\n          <slot />\r\n\r\n        </div>\r\n\r\n    );\r\n  }\r\n\r\n}"],"mappings":"4FAOaA,EAAa,M,wCAUD,E,cAQD,E,qBAOS,K,cAKH,M,cAKC,K,CAK7B,4BAAAC,CAA6BC,GAE3B,OAAQA,EAAEC,OAAOC,YAEf,IAAK,WAAY,CACf,GAAIF,EAAEC,OAAOE,aAAe,EAAG,CAC7BC,KAAKC,YAAYC,SAASN,EAAEC,OAAOE,cAAgB,E,CAErD,K,CAGF,IAAK,OAAQ,CACX,GAAIH,EAAEC,OAAOE,aAAeC,KAAKG,SAAS,GAAKP,EAAEC,OAAOO,eAAiB,QAAS,CAChFJ,KAAKC,YAAYC,SAASN,EAAEC,OAAOE,cAAgB,E,CAErD,K,GASN,iCAAAM,CAAkCT,GAGhC,IAAIU,EAAiBV,EAAEC,OAAOU,QAG9B,IAAKD,EAAeE,WAAY,CAC9BR,KAAKC,YAAYD,KAAKS,WACtB,M,KAGG,CACH,GAAIH,EAAeI,OAAQ,CACzBJ,EAAeI,OAAS,K,KACnB,CACLV,KAAKC,YAAYL,EAAEC,OAAOE,a,GAQhC,WAAAE,CAAYU,EAAwB,GAElCX,KAAKY,gBAAgBC,SAAQ,CAACD,EAAiBE,KAC7C,IAAIP,EAAUK,EACd,IAAIG,EAAgBR,EAAQS,cAAc,mCAE1C,GAAIF,GAASH,EAAe,CAC1BJ,EAAQU,aAAa,UAAW,QAChCjB,KAAKS,UAAYK,EACjBI,YAAW,KACTH,IAAa,MAAbA,SAAa,SAAbA,EAAeI,OAAO,GACrB,I,KACE,CACLZ,EAAQU,aAAa,UAAW,Q,KAQpCjB,KAAKS,UAAYE,C,CAKnB,iBAAAS,GAEEpB,KAAKY,gBAAkBZ,KAAKqB,GAAGC,iBAAiB,0BAChDtB,KAAKG,SAAWH,KAAKY,gBAAgBW,OAErC,IAAKvB,KAAKqB,GAAGG,aAAa,MAAO,CAC/BxB,KAAKqB,GAAGJ,aAAa,KAAMQ,EAAMC,mB,CAGnC,IAAK1B,KAAKY,iBAAmBZ,KAAKY,gBAAgBW,OAAS,EAAG,CAC5DI,QAAQC,MAAM,0EACd,M,CAGF5B,KAAKY,gBAAgBC,SAAQ,CAACgB,EAAgBf,KAE5C,IAAIP,EAAWsB,EAEftB,EAAQU,aAAa,UAAW,GAAIH,GAAS,KAC7CP,EAAQU,aAAa,QAAS,GAAGH,KACjCP,EAAQU,aAAa,KAAM,GAAGjB,KAAKY,gBAAgBW,UACnDhB,EAAQU,aAAa,cAAe,GAAGV,EAAQiB,aAAa,eAAiBjB,EAAQuB,aAAa,eAAkBhB,GAAS,KAC7HP,EAAQU,aAAa,eAAgB,GAAGjB,KAAK+B,WAAW,G,CAQ5D,MAAAC,GAEE,OAEIC,EAAA,OAAAC,IAAA,2CAAKC,MAAM,kBAETF,EAAA,QAAAC,IAAA,6C","ignoreList":[]}