{"version":3,"names":["YetiTablePagination","utils","generateUniqueId","watchRecordsHandler","this","updatePages","updateIndices","watchRecordsDisplayed","emitPaginationUpdatedEvent","parseOptionElements","options","newItemsPerPageOptions","i","length","option","item","tagName","toLowerCase","attributes","value","selectedItemsPerPageOptionIndex","push","contents","parseInt","innerHTML","Number","isNaN","console","warn","itemsPerPageOptions","j","remove","getItemsPerPageOption","itemsPerPage","records","startIndex","selectedPage","recordsDisplayed","Math","min","p","ceil","pages","handleItemsPerPageChange","e","select","target","selectedIndex","preventDefault","handlePageSelectChange","handlePreviousPageButtonClick","ev","max","handleNextPageButtonClick","paginationUpdated","emit","currentPage","recordsPerPage","componentWillLoad","optionElements","el","children","render","cssClasses","cssClass","h","key","class","htmlFor","recordAliasPlural","id","onChange","map","index","selected","recordAliasSingular","Object","assign","onClick","disabled","componentDidRender"],"sources":["src/components/yeti-table-pagination/yeti-table-pagination.tsx"],"sourcesContent":["import { Component, Prop, h, Element, State, Watch, Event, EventEmitter } from '@stencil/core';\r\nimport { utils } from '../../utils/utils';\r\n\r\n@Component({\r\n  tag: 'yeti-table-pagination',\r\n  shadow: false,\r\n})\r\nexport class YetiTablePagination {\r\n\r\n  @Event() paginationUpdated: EventEmitter;\r\n\r\n  @Element() el: HTMLElement;\r\n\r\n  @Prop() cssClass: string = '';\r\n\r\n  @Prop() htmlId: string = utils.generateUniqueId();\r\n\r\n  @Prop() records: number = 0;\r\n\r\n  @Prop() showOptions: boolean = true;\r\n\r\n  /**\r\n   * Descriptor of one record (e.g. \"1 item\")\r\n   */\r\n  @Prop() recordAliasSingular: string = \"item\";\r\n\r\n  /**\r\n   * Descriptor of multiple records (e.g. \"22 items\")\r\n   */\r\n  @Prop() recordAliasPlural: string = \"items\";\r\n\r\n  @Watch('records')\r\n  watchRecordsHandler() {\r\n    this.updatePages();\r\n    this.updateIndices();\r\n  }\r\n\r\n  @Prop({\r\n    reflect: true,\r\n    mutable: true\r\n  }) startIndex: number = 0;\r\n\r\n  @Prop({\r\n    reflect: true,\r\n    mutable: true\r\n  }) recordsDisplayed: number = 0;\r\n\r\n  @Watch('recordsDisplayed')\r\n  watchRecordsDisplayed() {\r\n    this.emitPaginationUpdatedEvent();\r\n  }\r\n\r\n  @State() itemsPerPageOptions: (number | string)[] = [10, 25, 50, 100, \"All\"];\r\n\r\n  @State() selectedItemsPerPageOptionIndex: number = 0;\r\n\r\n  @Prop({\r\n    reflect: true,\r\n    mutable: true\r\n  }) selectedPage: number = 1;\r\n\r\n  @State() pages: number = 1;\r\n\r\n\r\n\r\n  parseOptionElements(options: HTMLCollection) {\r\n\r\n    let newItemsPerPageOptions: Array<number | string> = [];\r\n\r\n    for (let i = 0; i < options.length; i++) {\r\n      \r\n      let option = options.item(i);\r\n      \r\n      // First, confirm this element is indeed a yeti-table-pagination-option element.\r\n      if (option.tagName.toLowerCase() == 'yeti-table-pagination-option') {\r\n\r\n        // Check to see if it has a selected attribute.\r\n        if (option.attributes && option.attributes['selected'] && (option.attributes['selected'].value == 'undefined' || option.attributes['selected'].value == \"true\")) {\r\n          this.selectedItemsPerPageOptionIndex = i;\r\n        }\r\n\r\n        // Check to see if it has an all attribute, and push the string \"All\" if it does.\r\n        if (option.attributes && option.attributes['all']) {\r\n\r\n          newItemsPerPageOptions.push(\"All\");\r\n\r\n        } else {\r\n\r\n          // Check to see if it has a valid number for its contents, and warn if it doesn't.\r\n          let contents = parseInt(option.innerHTML);\r\n\r\n          if (!Number.isNaN(contents)) {\r\n\r\n            newItemsPerPageOptions.push(contents);\r\n\r\n          } else {\r\n            \r\n            console.warn(`Ignoring \\<yeti-table-pagination-option\\> with invalid value \\\"${option.innerHTML}\\\". Numbers only please.`);\r\n          \r\n          }\r\n\r\n        }\r\n\r\n      }\r\n\r\n    } // End for\r\n\r\n    // Update itemsPerPageOptions if necessary.\r\n    if (newItemsPerPageOptions.length > 0) {\r\n      this.itemsPerPageOptions = newItemsPerPageOptions;\r\n    }\r\n\r\n    // Finally, we need to remove the option elements.\r\n    for (let j = options.length - 1; j >= 0; --j) {\r\n      options.item(j).remove();\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  getItemsPerPageOption() {\r\n    return this.itemsPerPageOptions[ this.selectedItemsPerPageOptionIndex ];\r\n  }\r\n\r\n\r\n\r\n  updateIndices() {\r\n    let itemsPerPage = this.getItemsPerPageOption();\r\n\r\n    // First set start index\r\n    if (itemsPerPage == \"All\" || itemsPerPage as number > this.records) {\r\n\r\n      this.startIndex = 0;\r\n\r\n    } else {\r\n\r\n      this.startIndex = ((this.selectedPage - 1) * (itemsPerPage as number));\r\n\r\n    }\r\n\r\n    // Second set end index\r\n    if (itemsPerPage == \"All\" || itemsPerPage as number > this.records) {\r\n\r\n      this.recordsDisplayed = this.records;\r\n\r\n    } else {\r\n      \r\n      this.recordsDisplayed = Math.min(\r\n        (this.records - this.startIndex),\r\n        (itemsPerPage as number)\r\n      )\r\n\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  updatePages() {\r\n    let p = this.getItemsPerPageOption();\r\n    p = (p == \"All\") ? 1 : Math.ceil(this.records / (p as number));\r\n    this.pages = p;\r\n  }\r\n\r\n\r\n\r\n  handleItemsPerPageChange(e: Event) {\r\n    let select = e.target as HTMLSelectElement;\r\n    this.selectedItemsPerPageOptionIndex = select.selectedIndex;\r\n    this.selectedPage = 1;\r\n    this.updatePages();\r\n    this.updateIndices();\r\n    e.preventDefault();\r\n    this.emitPaginationUpdatedEvent();\r\n  }\r\n\r\n\r\n\r\n  handlePageSelectChange(e: Event) {\r\n    let select = e.target as HTMLSelectElement;\r\n    this.selectedPage = parseInt(select.value);\r\n    this.updateIndices();\r\n    e.preventDefault();\r\n    this.emitPaginationUpdatedEvent();\r\n  }\r\n\r\n\r\n\r\n  handlePreviousPageButtonClick(ev) {\r\n    this.selectedPage = Math.max(1, this.selectedPage - 1);\r\n    this.updateIndices();\r\n    ev.preventDefault();\r\n    this.emitPaginationUpdatedEvent();\r\n  }\r\n\r\n\r\n\r\n  handleNextPageButtonClick(ev) {\r\n    this.selectedPage = Math.min(this.pages, this.selectedPage + 1);\r\n    this.updateIndices();\r\n    ev.preventDefault();\r\n    this.emitPaginationUpdatedEvent();\r\n  }\r\n\r\n\r\n\r\n  emitPaginationUpdatedEvent() {\r\n    let itemsPerPage = this.getItemsPerPageOption();\r\n    this.paginationUpdated.emit({\r\n      \"currentPage\": this.selectedPage-1,\r\n      \"recordsDisplayed\": this.recordsDisplayed,\r\n      \"recordsPerPage\": itemsPerPage\r\n    });\r\n  }\r\n\r\n\r\n\r\n  componentWillLoad() {\r\n    let optionElements = this.el.children;\r\n\r\n    // Look for and handle any <yeti-table-pagnation-option> elements.\r\n    if (optionElements.length > 0) {\r\n      \r\n      this.parseOptionElements(optionElements);\r\n\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n\r\n    let cssClasses = 'yeti-table-pagination';\r\n\r\n    //console.warn('Pagination render()', this.el);\r\n\r\n    if (this.cssClass != '') {\r\n      cssClasses += ' ' + this.cssClass;\r\n    }\r\n\r\n    return (\r\n      \r\n      <nav class={cssClasses} aria-label=\"Table Pagination\">\r\n\r\n        {/* Items per page */}\r\n        \r\n          <div class=\"yeti-table-pagination-items_per_page\">\r\n\r\n            { (this.showOptions) ?\r\n\r\n              \r\n              [<label htmlFor=\"demo-items_per_page\" class=\"yeti-table-pagination-items_per_page-label\">{this.recordAliasPlural} per page:</label>,\r\n\r\n              <select id=\"demo-items_per_page\" class=\"yeti-select yeti-table-pagination-items_per_page-select\" onChange={(e) => {\r\n                this.handleItemsPerPageChange(e);\r\n              }}>\r\n                {\r\n                  this.itemsPerPageOptions.map((option, index) => {\r\n                    return <option value={option} selected={(index == this.selectedItemsPerPageOptionIndex)} class=\"yeti-table-pagination-items_per_page-select-option\">{option}</option>\r\n                  })\r\n                }\r\n              </select>]\r\n\r\n            :\r\n              \r\n              \"\"\r\n            \r\n            }\r\n\r\n              <span class=\"yeti-table-pagination-items_per_page-count\">\r\n                { \r\n                  this.getItemsPerPageOption() == \"All\" || this.records == 0 ? \r\n                    \"\" \r\n                    : (this.startIndex + 1) + ' to ' + (this.startIndex + this.recordsDisplayed) /*(this.endIndex + 1)*/ + ' of '\r\n                }\r\n                {this.records} { this.records == 1 ? this.recordAliasSingular : this.recordAliasPlural}\r\n              </span>\r\n\r\n          </div>\r\n\r\n\r\n        {/* Pages */}\r\n        {\r\n          (this.records > 0) ?\r\n          <div class=\"yeti-table-pagination-pages\">\r\n\r\n              <label htmlFor=\"demo-pages\" class=\"yeti-a11y-hidden\">Page number, of {this.pages} page{this.pages == 1 ? '' : 's'}</label>\r\n\r\n              <select id=\"demo-pages\" class=\"yeti-select yeti-table-pagination-pages-select\" onChange={(e) => {\r\n                this.handlePageSelectChange(e);\r\n              }}>\r\n                  {(() => {\r\n                    let options = [];\r\n                    for (let i=1; i <= this.pages; i++) {\r\n                      options.push(<option value={i} class=\"yeti-table-pagination-pages-select-page\"  {...((i == this.selectedPage) && { selected: true })}>{i}</option>);\r\n                    }\r\n                    return options;\r\n                  })()}\r\n              </select>\r\n\r\n              <span class=\"yeti-table-pagination-pages-of_pages\" aria-hidden=\"true\">of {this.pages} page{this.pages == 1 ? '' : 's'}</span>\r\n\r\n              <ul class=\"yeti-table-pagination-pages-buttons\">\r\n\r\n                  <li class=\"yeti-table-pagination-pages-buttons-action\">\r\n\r\n                      <button \r\n                        class=\"yeti-table-pagination-pages-buttons-button\"\r\n                        onClick={(ev) => {this.handlePreviousPageButtonClick(ev)}}\r\n                        {...((this.selectedPage == 1) && { disabled: true })}\r\n                      >\r\n\r\n                          <span class=\"material-icons\" aria-hidden=\"true\">arrow_left</span>\r\n                          <span class=\"yeti-a11y-hidden\">Previous page</span>\r\n\r\n                      </button>\r\n\r\n                  </li>\r\n\r\n                  <li class=\"yeti-table-pagination-pages-buttons-action\">\r\n                    \r\n                      <button \r\n                        class=\"yeti-table-pagination-pages-buttons-button\"\r\n                        onClick={(ev) => {this.handleNextPageButtonClick(ev)}}\r\n                        {...((this.selectedPage == this.pages) && { disabled: true })}\r\n                      >\r\n                          <span class=\"material-icons\" aria-hidden=\"true\">arrow_right</span>\r\n                          <span class=\"yeti-a11y-hidden\">Next page</span>\r\n                      </button>\r\n\r\n                  </li>\r\n\r\n              </ul>\r\n\r\n          </div>\r\n          :\r\n          \"\"\r\n        }\r\n        \r\n    </nav>\r\n    );\r\n  }\r\n\r\n\r\n  componentDidRender() {\r\n    //console.warn(\"Pagination did render.\", this.el)\r\n    \r\n  }\r\n\r\n}\r\n"],"mappings":"mGAOaA,EAAmB,M,4FAMH,G,YAEFC,EAAMC,mB,aAEL,E,iBAEK,K,yBAKO,O,uBAKF,Q,gBAWZ,E,sBAKM,E,yBAOsB,CAAC,GAAI,GAAI,GAAI,IAAK,O,qCAEnB,E,kBAKzB,E,WAED,C,CA7BzB,mBAAAC,GACEC,KAAKC,cACLD,KAAKE,e,CAcP,qBAAAC,GACEH,KAAKI,4B,CAgBP,mBAAAC,CAAoBC,GAElB,IAAIC,EAAiD,GAErD,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAQG,OAAQD,IAAK,CAEvC,IAAIE,EAASJ,EAAQK,KAAKH,GAG1B,GAAIE,EAAOE,QAAQC,eAAiB,+BAAgC,CAGlE,GAAIH,EAAOI,YAAcJ,EAAOI,WAAW,cAAgBJ,EAAOI,WAAW,YAAYC,OAAS,aAAeL,EAAOI,WAAW,YAAYC,OAAS,QAAS,CAC/Jf,KAAKgB,gCAAkCR,C,CAIzC,GAAIE,EAAOI,YAAcJ,EAAOI,WAAW,OAAQ,CAEjDP,EAAuBU,KAAK,M,KAEvB,CAGL,IAAIC,EAAWC,SAAST,EAAOU,WAE/B,IAAKC,OAAOC,MAAMJ,GAAW,CAE3BX,EAAuBU,KAAKC,E,KAEvB,CAELK,QAAQC,KAAK,+DAAkEd,EAAOU,mC,IAW9F,GAAIb,EAAuBE,OAAS,EAAG,CACrCT,KAAKyB,oBAAsBlB,C,CAI7B,IAAK,IAAImB,EAAIpB,EAAQG,OAAS,EAAGiB,GAAK,IAAKA,EAAG,CAC5CpB,EAAQK,KAAKe,GAAGC,Q,EAOpB,qBAAAC,GACE,OAAO5B,KAAKyB,oBAAqBzB,KAAKgB,gC,CAKxC,aAAAd,GACE,IAAI2B,EAAe7B,KAAK4B,wBAGxB,GAAIC,GAAgB,OAASA,EAAyB7B,KAAK8B,QAAS,CAElE9B,KAAK+B,WAAa,C,KAEb,CAEL/B,KAAK+B,YAAe/B,KAAKgC,aAAe,GAAMH,C,CAKhD,GAAIA,GAAgB,OAASA,EAAyB7B,KAAK8B,QAAS,CAElE9B,KAAKiC,iBAAmBjC,KAAK8B,O,KAExB,CAEL9B,KAAKiC,iBAAmBC,KAAKC,IAC1BnC,KAAK8B,QAAU9B,KAAK+B,WACpBF,E,EASP,WAAA5B,GACE,IAAImC,EAAIpC,KAAK4B,wBACbQ,EAAKA,GAAK,MAAS,EAAIF,KAAKG,KAAKrC,KAAK8B,QAAWM,GACjDpC,KAAKsC,MAAQF,C,CAKf,wBAAAG,CAAyBC,GACvB,IAAIC,EAASD,EAAEE,OACf1C,KAAKgB,gCAAkCyB,EAAOE,cAC9C3C,KAAKgC,aAAe,EACpBhC,KAAKC,cACLD,KAAKE,gBACLsC,EAAEI,iBACF5C,KAAKI,4B,CAKP,sBAAAyC,CAAuBL,GACrB,IAAIC,EAASD,EAAEE,OACf1C,KAAKgC,aAAeb,SAASsB,EAAO1B,OACpCf,KAAKE,gBACLsC,EAAEI,iBACF5C,KAAKI,4B,CAKP,6BAAA0C,CAA8BC,GAC5B/C,KAAKgC,aAAeE,KAAKc,IAAI,EAAGhD,KAAKgC,aAAe,GACpDhC,KAAKE,gBACL6C,EAAGH,iBACH5C,KAAKI,4B,CAKP,yBAAA6C,CAA0BF,GACxB/C,KAAKgC,aAAeE,KAAKC,IAAInC,KAAKsC,MAAOtC,KAAKgC,aAAe,GAC7DhC,KAAKE,gBACL6C,EAAGH,iBACH5C,KAAKI,4B,CAKP,0BAAAA,GACE,IAAIyB,EAAe7B,KAAK4B,wBACxB5B,KAAKkD,kBAAkBC,KAAK,CAC1BC,YAAepD,KAAKgC,aAAa,EACjCC,iBAAoBjC,KAAKiC,iBACzBoB,eAAkBxB,G,CAMtB,iBAAAyB,GACE,IAAIC,EAAiBvD,KAAKwD,GAAGC,SAG7B,GAAIF,EAAe9C,OAAS,EAAG,CAE7BT,KAAKK,oBAAoBkD,E,EAQ7B,MAAAG,GAEE,IAAIC,EAAa,wBAIjB,GAAI3D,KAAK4D,UAAY,GAAI,CACvBD,GAAc,IAAM3D,KAAK4D,Q,CAG3B,OAEEC,EAAA,OAAAC,IAAA,2CAAKC,MAAOJ,EAAU,aAAa,oBAI/BE,EAAA,OAAAC,IAAA,2CAAKC,MAAM,wCAEN/D,KAAgB,YAGjB,CAAC6D,EAAA,SAAOG,QAAQ,sBAAsBD,MAAM,8CAA8C/D,KAAKiE,kBAAiB,cAEhHJ,EAAA,UAAQK,GAAG,sBAAsBH,MAAM,0DAA0DI,SAAW3B,IAC1GxC,KAAKuC,yBAAyBC,EAAE,GAG9BxC,KAAKyB,oBAAoB2C,KAAI,CAAC1D,EAAQ2D,IAC7BR,EAAA,UAAQ9C,MAAOL,EAAQ4D,SAAWD,GAASrE,KAAKgB,gCAAkC+C,MAAM,sDAAsDrD,OAO3J,GAIAmD,EAAA,QAAAC,IAAA,2CAAMC,MAAM,8CAER/D,KAAK4B,yBAA2B,OAAS5B,KAAK8B,SAAW,EACvD,GACG9B,KAAK+B,WAAa,EAAK,QAAU/B,KAAK+B,WAAa/B,KAAKiC,kBAA4C,OAE1GjC,KAAK8B,QAAO,IAAI9B,KAAK8B,SAAW,EAAI9B,KAAKuE,oBAAsBvE,KAAKiE,oBAQ1EjE,KAAK8B,QAAU,EAChB+B,EAAA,OAAKE,MAAM,+BAEPF,EAAA,SAAOG,QAAQ,aAAaD,MAAM,oBAAkB,mBAAkB/D,KAAKsC,MAAK,QAAOtC,KAAKsC,OAAS,EAAI,GAAK,KAE9GuB,EAAA,UAAQK,GAAG,aAAaH,MAAM,iDAAiDI,SAAW3B,IACxFxC,KAAK6C,uBAAuBL,EAAE,GAE3B,MACC,IAAIlC,EAAU,GACd,IAAK,IAAIE,EAAE,EAAGA,GAAKR,KAAKsC,MAAO9B,IAAK,CAClCF,EAAQW,KAAK4C,EAAA,SAAAW,OAAAC,OAAA,CAAQ1D,MAAOP,EAAGuD,MAAM,2CAAiDvD,GAAKR,KAAKgC,cAAiB,CAAEsC,SAAU,OAAU9D,G,CAEzI,OAAOF,CACR,EANA,IASLuD,EAAA,QAAME,MAAM,uCAAsC,cAAa,QAAM,MAAK/D,KAAKsC,MAAK,QAAOtC,KAAKsC,OAAS,EAAI,GAAK,KAElHuB,EAAA,MAAIE,MAAM,uCAENF,EAAA,MAAIE,MAAM,8CAENF,EAAA,SAAAW,OAAAC,OAAA,CACEV,MAAM,6CACNW,QAAU3B,IAAQ/C,KAAK8C,8BAA8BC,EAAG,GAClD/C,KAAKgC,cAAgB,GAAM,CAAE2C,SAAU,OAG3Cd,EAAA,QAAME,MAAM,iBAAgB,cAAa,QAAM,cAC/CF,EAAA,QAAME,MAAM,oBAAkB,mBAMtCF,EAAA,MAAIE,MAAM,8CAENF,EAAA,SAAAW,OAAAC,OAAA,CACEV,MAAM,6CACNW,QAAU3B,IAAQ/C,KAAKiD,0BAA0BF,EAAG,GAC9C/C,KAAKgC,cAAgBhC,KAAKsC,OAAU,CAAEqC,SAAU,OAEpDd,EAAA,QAAME,MAAM,iBAAgB,cAAa,QAAM,eAC/CF,EAAA,QAAME,MAAM,oBAAkB,iBAS9C,G,CAQR,kBAAAa,G","ignoreList":[]}