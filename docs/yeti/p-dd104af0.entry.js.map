{"version":3,"names":["YetiTablePagination","utils","generateUniqueId","watchRecordsHandler","this","updatePages","updateIndices","watchRecordsDisplayed","paginationUpdated","emit","currentPage","selectedPage","recordsDisplayed","parseOptionElements","options","newItemsPerPageOptions","i","length","option","item","tagName","toLowerCase","attributes","push","contents","parseInt","innerHTML","Number","isNaN","console","warn","itemsPerPageOptions","j","remove","getItemsPerPageOption","selectedItemsPerPageOptionIndex","itemsPerPage","records","startIndex","Math","min","p","ceil","pages","handleItemsPerPageChange","e","select","target","selectedIndex","preventDefault","handlePageSelectChange","value","handlePreviousPageButtonClick","ev","max","handleNextPageButtonClick","componentWillLoad","optionElements","el","children","render","cssClasses","cssClass","h","class","htmlFor","recordAliasPlural","id","onChange","map","recordAliasSingular","Object","assign","selected","onClick","disabled","componentDidRender"],"sources":["src/components/yeti-table-pagination/yeti-table-pagination.tsx"],"sourcesContent":["import { Component, Prop, h, Element, State, Watch, Event, EventEmitter } from '@stencil/core';\nimport { utils } from '../../utils/utils';\n\n@Component({\n  tag: 'yeti-table-pagination',\n  shadow: false,\n})\nexport class YetiTablePagination {\n\n  @Event() paginationUpdated: EventEmitter;\n\n  @Element() el: HTMLElement;\n\n  @Prop() cssClass: string = '';\n\n  @Prop() htmlId: string = utils.generateUniqueId();\n\n  @Prop() records: number = 0;\n\n  @Prop() showOptions: boolean = true;\n\n  /**\n   * Descriptor of one record (e.g. \"1 item\")\n   */\n  @Prop() recordAliasSingular: string = \"item\";\n\n  /**\n   * Descriptor of multiple records (e.g. \"22 items\")\n   */\n  @Prop() recordAliasPlural: string = \"items\";\n\n  @Watch('records')\n  watchRecordsHandler() {\n    this.updatePages();\n    this.updateIndices();\n  }\n\n  @Prop({\n    reflect: true,\n    mutable: true\n  }) startIndex: number = 0;\n\n  @Prop({\n    reflect: true,\n    mutable: true\n  }) recordsDisplayed: number = 0;\n\n  @Watch('recordsDisplayed')\n  watchRecordsDisplayed() {\n    this.paginationUpdated.emit({\n      \"currentPage\": this.selectedPage-1,\n      \"recordsDisplayed\": this.recordsDisplayed\n    });\n  }\n\n  @State() itemsPerPageOptions: (number | string)[] = [10, 25, 50, 100, \"All\"];\n\n  @State() selectedItemsPerPageOptionIndex: number = 0;\n\n  @Prop({\n    reflect: true,\n    mutable: true\n  }) selectedPage: number = 1;\n\n  @State() pages: number = 1;\n\n\n\n  parseOptionElements(options: HTMLCollection) {\n\n    let newItemsPerPageOptions: Array<number | string> = [];\n\n    for (let i = 0; i < options.length; i++) {\n      \n      let option = options.item(i);\n      \n      // First, confirm this element is indeed a yeti-table-pagination-option element.\n      if (option.tagName.toLowerCase() == 'yeti-table-pagination-option') {\n\n        // Check to see if it has an all attribute, and push the string \"All\" if it does.\n        if (option.attributes && option.attributes['all']) {\n\n          newItemsPerPageOptions.push(\"All\");\n\n        } else {\n\n          // Check to see if it has a valid number for its contents, and warn if it doesn't.\n          let contents = parseInt(option.innerHTML);\n\n          if (!Number.isNaN(contents)) {\n\n            newItemsPerPageOptions.push(contents);\n\n          } else {\n            \n            console.warn(`Ignoring \\<yeti-table-pagination-option\\> with invalid value \\\"${option.innerHTML}\\\". Numbers only please.`);\n          \n          }\n\n        }\n\n      }\n\n    } // End for\n\n    // Update itemsPerPageOptions if necessary.\n    if (newItemsPerPageOptions.length > 0) {\n      this.itemsPerPageOptions = newItemsPerPageOptions;\n    }\n\n    // Finally, we need to remove the option elements.\n    for (let j = options.length - 1; j >= 0; --j) {\n      options.item(j).remove();\n    }\n\n  }\n\n\n\n  getItemsPerPageOption() {\n    return this.itemsPerPageOptions[ this.selectedItemsPerPageOptionIndex ];\n  }\n\n\n\n  updateIndices() {\n    let itemsPerPage = this.getItemsPerPageOption();\n\n    // First set start index\n    if (itemsPerPage == \"All\" || itemsPerPage as number > this.records) {\n\n      this.startIndex = 0;\n\n    } else {\n\n      this.startIndex = ((this.selectedPage - 1) * (itemsPerPage as number));\n\n    }\n\n    // Second set end index\n    if (itemsPerPage == \"All\" || itemsPerPage as number > this.records) {\n\n      this.recordsDisplayed = this.records;\n\n    } else {\n      \n      this.recordsDisplayed = Math.min(\n        (this.records - this.startIndex),\n        (itemsPerPage as number)\n      )\n\n    }\n\n  }\n\n\n\n  updatePages() {\n    let p = this.getItemsPerPageOption();\n    p = (p == \"All\") ? 1 : Math.ceil(this.records / (p as number));\n    this.pages = p;\n  }\n\n\n\n  handleItemsPerPageChange(e: Event) {\n    let select = e.target as HTMLSelectElement;\n    this.selectedItemsPerPageOptionIndex = select.selectedIndex;\n    this.selectedPage = 1;\n    this.updatePages();\n    this.updateIndices();\n    e.preventDefault();\n    this.paginationUpdated.emit({\n      \"currentPage\": this.selectedPage-1,\n      \"recordsDisplayed\": this.recordsDisplayed\n    });\n  }\n\n\n\n  handlePageSelectChange(e: Event) {\n    let select = e.target as HTMLSelectElement;\n    this.selectedPage = parseInt(select.value);\n    this.updateIndices();\n    e.preventDefault();\n    this.paginationUpdated.emit({\n      \"currentPage\": this.selectedPage-1,\n      \"recordsDisplayed\": this.recordsDisplayed\n    });\n  }\n\n\n\n  handlePreviousPageButtonClick(ev) {\n    this.selectedPage = Math.max(1, this.selectedPage - 1);\n    this.updateIndices();\n    ev.preventDefault();\n    this.paginationUpdated.emit({\n      \"currentPage\": this.selectedPage-1,\n      \"recordsDisplayed\": this.recordsDisplayed\n    });\n  }\n\n\n\n  handleNextPageButtonClick(ev) {\n    this.selectedPage = Math.min(this.pages, this.selectedPage + 1);\n    this.updateIndices();\n    ev.preventDefault();\n    this.paginationUpdated.emit({\n      \"currentPage\": this.selectedPage-1,\n      \"recordsDisplayed\": this.recordsDisplayed\n    });\n  }\n\n\n\n  componentWillLoad() {\n    let optionElements = this.el.children;\n\n    // Look for and handle any <yeti-table-pagnation-option> elements.\n    if (optionElements.length > 0) {\n      \n      this.parseOptionElements(optionElements);\n\n    }\n\n  }\n\n\n\n  render() {\n\n    let cssClasses = 'yeti-table-pagination';\n\n    //console.warn('Pagination render()', this.el);\n\n    if (this.cssClass != '') {\n      cssClasses += ' ' + this.cssClass;\n    }\n\n    return (\n      \n      <nav class={cssClasses} aria-label=\"Table Pagination\">\n\n        {/* Items per page */}\n        \n          <div class=\"yeti-table-pagination-items_per_page\">\n\n            { (this.showOptions) ?\n\n              <div>\n\n                <label htmlFor=\"demo-items_per_page\" class=\"yeti-table-pagination-items_per_page-label\">{this.recordAliasPlural} per page:</label>\n\n                <select id=\"demo-items_per_page\" class=\"yeti-select yeti-table-pagination-items_per_page-select\" onChange={(e) => {\n                  this.handleItemsPerPageChange(e);\n                }}>\n                  {\n                    this.itemsPerPageOptions.map((option) => {\n                      return <option value={option} class=\"yeti-table-pagination-items_per_page-select-option\">{option}</option>\n                    })\n                  }\n                </select>\n              \n              </div>\n\n            :\n              \n              \"\"\n            \n            }\n\n              <span class=\"yeti-table-pagination-items_per_page-count\">\n                { \n                  this.getItemsPerPageOption() == \"All\" || this.records == 0 ? \n                    \"\" \n                    : (this.startIndex + 1) + ' to ' + (this.startIndex + this.recordsDisplayed) /*(this.endIndex + 1)*/ + ' of '\n                }\n                {this.records} { this.records == 1 ? this.recordAliasSingular : this.recordAliasPlural}\n              </span>\n\n          </div>\n\n\n        {/* Pages */}\n        {\n          (this.records > 0) ?\n          <div class=\"yeti-table-pagination-pages\">\n\n              <label htmlFor=\"demo-pages\" class=\"yeti-a11y-hidden\">Page number, of {this.pages} page{this.pages == 1 ? '' : 's'}</label>\n\n              <select id=\"demo-pages\" class=\"yeti-select yeti-table-pagination-pages-select\" onChange={(e) => {\n                this.handlePageSelectChange(e);\n              }}>\n                  {(() => {\n                    let options = [];\n                    for (let i=1; i <= this.pages; i++) {\n                      options.push(<option value={i} class=\"yeti-table-pagination-pages-select-page\"  {...((i == this.selectedPage) && { selected: true })}>{i}</option>);\n                    }\n                    return options;\n                  })()}\n              </select>\n\n              <span class=\"yeti-table-pagination-pages-of_pages\" aria-hidden=\"true\">of {this.pages} page{this.pages == 1 ? '' : 's'}</span>\n\n              <ul class=\"yeti-table-pagination-pages-buttons\">\n\n                  <li class=\"yeti-table-pagination-pages-buttons-action\">\n\n                      <button \n                        class=\"yeti-table-pagination-pages-buttons-button\"\n                        onClick={(ev) => {this.handlePreviousPageButtonClick(ev)}}\n                        {...((this.selectedPage == 1) && { disabled: true })}\n                      >\n\n                          <span class=\"material-icons\" aria-hidden=\"true\">arrow_left</span>\n                          <span class=\"yeti-a11y-hidden\">Previous page</span>\n\n                      </button>\n\n                  </li>\n\n                  <li class=\"yeti-table-pagination-pages-buttons-action\">\n                    \n                      <button \n                        class=\"yeti-table-pagination-pages-buttons-button\"\n                        onClick={(ev) => {this.handleNextPageButtonClick(ev)}}\n                        {...((this.selectedPage == this.pages) && { disabled: true })}\n                      >\n                          <span class=\"material-icons\" aria-hidden=\"true\">arrow_right</span>\n                          <span class=\"yeti-a11y-hidden\">Next page</span>\n                      </button>\n\n                  </li>\n\n              </ul>\n\n          </div>\n          :\n          \"\"\n        }\n        \n    </nav>\n    );\n  }\n\n\n  componentDidRender() {\n    //console.warn(\"Pagination did render.\", this.el)\n    \n  }\n\n}\n"],"mappings":"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"}