import{r as t,h as e,g as a}from"./p-0d1be970.js";import{u as s}from"./p-943baa85.js";const i=class{constructor(e){t(this,e);this.previouslyFocusedElement=null;this.bodyInnerWrapper=null;this.shouldStealFocus=false;this.shouldReturnFocus=false;this.hasOpened=false;this.headingId=s.generateUniqueId();this.isSideSheet=false;this.heading="Modal Heading";this.describedBy="";this.size="";this.modalClass="";this.isScrollable=true;this.isActive=false;this.showClose=true;this.isAnimating=false;this.isOpening=false;this.isClosing=false}handleFocus(t){if(!this.isSideSheet){if(t){this.shouldStealFocus=true;this.setBackgroundElementStyles(true)}else{this.shouldReturnFocus=true;this.setBackgroundElementStyles(false)}}else{if(t){this.setBackgroundElementStyles(true);this.isAnimating=true}else{this.isAnimating=true}}}setBackgroundElementStyles(t){if(t){document.body.classList.add("yeti-modal-has_active_modal")}else{document.body.classList.remove("yeti-modal-has_active_modal")}}focusTrap(t){if(this.isActive&&t.keyCode==27&&this.showClose){this.isActive=false}}handleTransitionEnd(t){if(!t.propertyName||t.propertyName!="transform"){return}if(this.isOpening){this.previouslyFocusedElement=document.activeElement;this.handleInitialFocus();this.isOpening=false;this.hasOpened=true}else if(this.isClosing){this.setBackgroundElementStyles(false);if(this.previouslyFocusedElement){this.previouslyFocusedElement.focus()}this.isClosing=false}this.isAnimating=false}handleInitialFocus(){let t=this.el.querySelector(".yeti-modal-content");let e=s.aria.focusFirstDescendant(t);if(!e){t.setAttribute("tabIndex","-1");t.focus()}}componentWillLoad(){let t=this.el.getAttribute("id");let e=this.el.querySelector("yeti-modal-content");let a=this.el.querySelector("yeti-modal-buttons");let i=this.el.querySelector("yeti-modal-header-action");if(!e){console.error("Yeti Modal components must have a yeti-modal-content element.")}else{e.setAttribute("slot","content")}if(!a){console.error("Yeti Modal components must have a yeti-modal-buttons element.")}else{a.setAttribute("slot","buttons")}if(i){i.setAttribute("slot","header_action")}if(!t||t==""){t=s.generateUniqueId();this.el.setAttribute("id",t)}if(this.isActive){this.setBackgroundElementStyles(true)}}render(){let t=this.isSideSheet?"yeti-modal_ss-overlay":"yeti-modal-overlay";let a=`yeti-modal${this.isSideSheet?" yeti-modal_ss":""}`;let s={role:"dialog","aria-modal":"true","aria-labelledby":this.headingId};if(this.describedBy!=""){s["aria-describedby"]=this.describedBy}t+=this.isActive||this.isAnimating?"":" yeti-modal-overlay__inert";t+=this.isOpening?" yeti-modal__opening":"";t+=this.hasOpened?" yeti-modal__open":"";t+=this.isClosing?" yeti-modal__closing":"";a+=this.size==""?"":` yeti-modal-size-${this.size}`;a+=this.modalClass!=""?` ${this.modalClass}`:"";a+=this.isScrollable?"":" yeti-modal__unscrollable";return e("div",{key:"f022cc9be4f51a89e92f590c865bb2a4f1276abc",class:t},e("div",{key:"0f68013f17937cca0ca511ba167d224fdec4ad82",class:"yeti-modal-bumper-front",tabIndex:0}),e("div",Object.assign({key:"0a881689946c44dc3e0c35335b84f8e2a4a1babb",class:a},s),e("div",{key:"0952a4192227a3a01fed4661cda6b0c0ecf7df69",class:"yeti-modal-header"},e("h1",{key:"7d884f5589b94da5d7ca992be403e6a76207290d",class:"yeti-modal-header-heading",id:this.headingId},this.heading),e("div",{key:"a201a2a69fbdd98dcdb5a0200607eae76e37e280",class:"yeti-modal-header-action"},e("slot",{key:"1ccf3ad1f9dbff5b01a61e38bd90dfa0235555a2",name:"header_action"})),this.showClose?e("button",{class:"yeti-modal-header-close yeti-button-ghost",onClick:()=>{this.isActive=false}},e("span",{class:"material-icons"},"close")):null),e("div",{key:"db0a9379c4ab35fc1cad3a04d6c2deb0e6ed0081",class:"yeti-modal-content"},e("div",{key:"8aceea84b9ed9cc320bd1d7d0ff577ba487216ca",class:"yeti-modal-content-actual"},e("slot",{key:"48aec2e73aade9448bda7d783b56455c8a17993a",name:"content"})),e("div",{key:"7a9f7796dd2f03850f840ab964bb46841a2aa941",class:"yeti-modal-content-fade"})),e("div",{key:"729343283ac2a9032c4286753adaaf8cc2db45b5",class:"yeti-modal-actions"},e("div",{key:"9c85b72c3c80ccac7629abf7ad22ccbf27aac86e",class:"yeti-modal-actions-buttons"},e("slot",{key:"6ca7b726878741b436cea17c206877a6f505fe58",name:"buttons"})))),e("div",{key:"a7c1318ec987d1459db78be260a07798b525e79a",class:"yeti-modal-bumper-back",tabIndex:0}))}componentDidRender(){if(this.shouldStealFocus){this.previouslyFocusedElement=document.activeElement;this.handleInitialFocus()}if(this.shouldReturnFocus){if(this.previouslyFocusedElement){this.previouslyFocusedElement.focus()}}if(this.isAnimating){if(this.isActive){setTimeout((()=>{this.isOpening=true;this.isClosing=false}),1)}else{setTimeout((()=>{this.isOpening=false;this.hasOpened=false;this.isClosing=true}),1)}}this.shouldStealFocus=false;this.shouldReturnFocus=false}componentDidLoad(){let t=this.el.querySelector(".yeti-modal-bumper-front");let e=this.el.querySelector(".yeti-modal-bumper-back");t.addEventListener("focus",(()=>{s.aria.focusLastDescendant(this.el.querySelector(".yeti-modal"))}));e.addEventListener("focus",(()=>{s.aria.focusFirstDescendant(this.el.querySelector(".yeti-modal"))}))}get el(){return a(this)}static get watchers(){return{isActive:["handleFocus"]}}};export{i as yeti_modal};
//# sourceMappingURL=p-f855d775.entry.js.map