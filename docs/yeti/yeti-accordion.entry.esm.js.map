{"version":3,"file":"yeti-accordion.entry.esm.js","sources":["src/components/yeti-accordion/yeti-accordion.tsx"],"sourcesContent":["import { Component, Prop, h, State, Element, Watch, Listen } from '@stencil/core';\r\nimport { utils } from '../../utils/utils';\r\n\r\n@Component({\r\n  tag: 'yeti-accordion',\r\n  shadow: false,\r\n})\r\nexport class YetiAccordion {\r\n\r\n  @Element() el: HTMLElement;\r\n\r\n  /**\r\n   * The 0-based index of the open section.\r\n   */\r\n  @Prop({\r\n    mutable: true,\r\n    reflect: true\r\n  }) openIndex: number = 0;\r\n \r\n  @Watch(\"openIndex\")\r\n  handleOpenIndexChange(newSectionIndex: number) {\r\n    this.openSection(newSectionIndex);\r\n  }\r\n\r\n  /**\r\n   * The total number of sections the Accordion has.\r\n   */\r\n  @Prop({\r\n    mutable: true,\r\n    reflect: true\r\n  }) sections: number = 0;\r\n\r\n  /**\r\n   * A list of the Accordion's yeti-accordion-section child elements\r\n   */\r\n  @Prop({\r\n    mutable: true\r\n  }) sectionElements: NodeList = null;\r\n\r\n  /**\r\n   * Whether or not to use wizard mode, in which you can only open one section at a time, and you have to go in order\r\n   */\r\n  @Prop() isWizard: boolean = false;\r\n\r\n  /**\r\n   * Used to toggle a re-render of the icon.\r\n   */\r\n  @State() iLoveJSX: boolean = false;\r\n\r\n\r\n\r\n  @Listen('accordionActionClick')\r\n  handleAccordionActionClicked(e) {\r\n\r\n    switch (e.detail.actionType) {\r\n\r\n      case \"previous\": {\r\n        if (e.detail.sectionIndex > 0) {\r\n          this.openSection(parseInt(e.detail.sectionIndex) - 1);\r\n        }\r\n        break;\r\n      }\r\n\r\n      case \"next\": {\r\n        if (e.detail.sectionIndex < this.sections-1 && e.detail.sectionStatus != \"error\") {\r\n          this.openSection(parseInt(e.detail.sectionIndex) + 1);\r\n        }\r\n        break;\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n\r\n\r\n  @Listen('accordionSectionHeaderClick')\r\n  handleAccordionSectionHeaderClick(e) {\r\n\r\n    // User clicked on a section heading, toggle this pane's state and set the others accordingly.\r\n    let clickedSection = e.detail.section;\r\n\r\n    // First make sure it's openable\r\n    if (!clickedSection.isOpenable) {\r\n      this.openSection(this.openIndex); // It wasn't, so just open whatever we previously had as the open section.\r\n      return;\r\n    }\r\n\r\n    else {\r\n      if (clickedSection.isOpen) {\r\n        clickedSection.isOpen = false;\r\n      } else {\r\n        this.openSection(e.detail.sectionIndex);\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  openSection(suppliedIndex: number = 0) {\r\n    // Opens the section at suppliedIndex while closing the other sections.\r\n    this.sectionElements.forEach((sectionElements, index) => {\r\n      let section = sectionElements as HTMLElement;\r\n      let sectionHeader = section.querySelector(\".yeti-accordion-section-heading\") as HTMLElement;\r\n      let sectionStatus = section.getAttribute(\"status\");\r\n\r\n      if (index == suppliedIndex) {\r\n        section.setAttribute(\"is-openable\", \"true\");\r\n        section.setAttribute(\"status\", (sectionStatus == \"undefined\" ? \"reachable\" : sectionStatus));\r\n        section.setAttribute(\"is-open\", \"true\");\r\n        this.openIndex = index;\r\n        setTimeout(() => { \r\n          sectionHeader?.focus();\r\n        }, 100);\r\n      } else {\r\n        section.setAttribute(\"is-open\", \"false\");\r\n      }\r\n\r\n      // Set the Openable state\r\n      //section.setAttribute(\"is-openable\", `${ (index <= suppliedIndex)  ||  !this.isWizard }`);\r\n\r\n    });\r\n\r\n    this.openIndex = suppliedIndex;\r\n  }\r\n\r\n\r\n\r\n  componentWillLoad() {\r\n    // Populate the sectionElements array and do some initial set-up.\r\n    this.sectionElements = this.el.querySelectorAll('yeti-accordion-section');\r\n    this.sections = this.sectionElements.length;\r\n\r\n    if (!this.el.hasAttribute(\"id\")) {\r\n      this.el.setAttribute(\"id\", utils.generateUniqueId());\r\n    }\r\n\r\n    if (!this.sectionElements || this.sectionElements.length < 2) {\r\n      console.error(\"Yeti Accordion must have at least two yeti-accordion-section elements.\");\r\n      return;\r\n    }\r\n\r\n    this.sectionElements.forEach((sectionElement, index) => {\r\n\r\n      let section = (sectionElement as HTMLElement);\r\n\r\n      section.setAttribute(\"is-open\", `${(index == this.openIndex)}`);\r\n      section.setAttribute(\"index\", `${index}`);\r\n      section.setAttribute(\"of\", `${this.sectionElements.length}`);\r\n      section.setAttribute(\"is-openable\", `${section.hasAttribute(\"is-openable\") ? section.getAttribute(\"is-openable\") : (index <= this.openIndex)}`);\r\n      section.setAttribute(\"status\", `${section.hasAttribute(\"status\") ? section.getAttribute(\"status\") : (index == this.openIndex) ? \"reachable\" : \"undefined\"}`)\r\n      section.setAttribute(\"is-in-wizard\", `${this.isWizard}`);\r\n\r\n    });\r\n\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n\r\n    return (\r\n\r\n        <div class=\"yeti-accordion\">\r\n\r\n          <slot />\r\n\r\n        </div>\r\n\r\n    );\r\n  }\r\n\r\n}"],"names":[],"mappings":"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"}