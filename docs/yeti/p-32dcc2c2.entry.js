import{r as e,h as t,a as i,g as s}from"./p-39d3f65a.js";const a=class{constructor(t){e(this,t);this.ignoreClass="yeti-unsaved_changes-ignore_changes";this.prompterClass="yeti-unsaved_changes-prompter";this.nonprompterClass="yeti-unsaved_changes-nonprompter";this.weGotThis=false;this.handleBeforeUnload=e=>{if(!this.isEnabled){return}if(!this.weGotThis){e.preventDefault()}else{this.weGotThis=false;return undefined}};this.handleExitClick=e=>{this.weGotThis=true;if(this.formHasChanges){this.clickedElementLeftHanging=e.currentTarget;e.preventDefault();e.stopImmediatePropagation();this.isOpen=true}};this.handleModalPrimaryClick=()=>{let e=this.clickedElementLeftHanging;this.isOpen=false;e.removeEventListener("click",this.handleExitClick,true);e.click()};this.isEnabled=true;this.formId="";this.formHasChanges=false;this.isOpen=false}handleModalSecondaryClick(){this.isOpen=false;this.weGotThis=false}initializeLinkListeners(){let e=document.querySelectorAll(`a:not( .${this.nonprompterClass} ), .${this.prompterClass}`);e.forEach((e=>{e.addEventListener("click",this.handleExitClick,true)}))}initializeNonPrompters(){let e=document.querySelectorAll(`.${this.nonprompterClass}`);e.forEach((e=>{e.addEventListener("click",(()=>{this.weGotThis=true}))}))}componentWillLoad(){if(this.formId==""){console.error("Error in Yeti Unsaved Changes component: the form-id attribute must be the id of a valid form element.");return}this.form=document.getElementById(this.formId);if(this.form=="undefined"||!this.form.tagName||this.form.tagName.toLowerCase()!="form"){console.error("Error in Yeti Unsaved Changes component: the form-id attribute must be the id of a valid form element.");return}window.addEventListener("beforeunload",this.handleBeforeUnload,{capture:true});this.form.addEventListener("input",(e=>{let t=e.target;if(t&&t.classList&&!t.classList.contains(this.ignoreClass)){this.formHasChanges=true}}));this.initializeLinkListeners();this.initializeNonPrompters()}render(){return t(i,{key:"ba04e373a974bdc6cd36e41e827151eec43ad917"},t("yeti-modal",{key:"ba086059130ec6a4fd4e4d23fa5c01081d8aa2a5",heading:"Unsaved Changes",id:"modal1","described-by":"modal1_description",isActive:this.isOpen,showClose:false},t("yeti-modal-content",{key:"54105b4930a9e20bd25829d9400f3a2dae16dd29"},t("p",{key:"27f1b92d1b7114f36f2781d33c4c6809b02d3a0e",id:"modal1_description",class:"yeti-margin-bottom-4"},"You have unsaved changes that will be lost."),t("p",{key:"65f91abc6f7bb6ed348f4e38399b80294046fb5a"},"Are you sure you want to leave the page?")),t("yeti-modal-buttons",{key:"523ce500673bd977ce748500f3aefed5e26e61e5"},t("button",{key:"2b6101b519b1113f14c268e6edeec447fa9c31b2",class:"yeti-button yeti-button-primary",id:"unsavedChangesModalPrimaryButton",onClick:()=>{this.handleModalPrimaryClick()}},"Yes, Discard Changes"),t("button",{key:"c2d3f128dafefed98c2f212b33fef5df4e14178c",class:"yeti-button yeti-button-secondary",id:"unsavedChangesModalSecondaryButton",onClick:()=>{this.handleModalSecondaryClick()}},"No, Keep Editing"))))}get el(){return s(this)}};export{a as yeti_unsaved_changes};
//# sourceMappingURL=p-32dcc2c2.entry.js.map