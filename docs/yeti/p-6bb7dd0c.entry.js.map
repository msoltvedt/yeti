{"version":3,"names":["YetiTablePagination","utils","generateUniqueId","watchRecordsHandler","this","updatePages","updateIndices","watchRecordsDisplayed","emitPaginationUpdatedEvent","parseOptionElements","options","newItemsPerPageOptions","i","length","option","item","tagName","toLowerCase","attributes","value","selectedItemsPerPageOptionIndex","push","contents","parseInt","innerHTML","Number","isNaN","console","warn","itemsPerPageOptions","j","remove","getItemsPerPageOption","itemsPerPage","records","startIndex","selectedPage","recordsDisplayed","Math","min","p","ceil","pages","handleItemsPerPageChange","e","select","target","selectedIndex","preventDefault","handlePageSelectChange","handlePreviousPageButtonClick","ev","max","handleNextPageButtonClick","paginationUpdated","emit","currentPage","recordsPerPage","componentWillLoad","optionElements","el","children","render","cssClasses","cssClass","h","key","class","htmlFor","recordAliasPlural","id","onChange","map","index","selected","recordAliasSingular","Object","assign","onClick","disabled","componentDidRender"],"sources":["src/components/yeti-table-pagination/yeti-table-pagination.tsx"],"sourcesContent":["import { Component, Prop, h, Element, State, Watch, Event, EventEmitter } from '@stencil/core';\nimport { utils } from '../../utils/utils';\n\n@Component({\n  tag: 'yeti-table-pagination',\n  shadow: false,\n})\nexport class YetiTablePagination {\n\n  @Event() paginationUpdated: EventEmitter;\n\n  @Element() el: HTMLElement;\n\n  @Prop() cssClass: string = '';\n\n  @Prop() htmlId: string = utils.generateUniqueId();\n\n  @Prop() records: number = 0;\n\n  @Prop() showOptions: boolean = true;\n\n  /**\n   * Descriptor of one record (e.g. \"1 item\")\n   */\n  @Prop() recordAliasSingular: string = \"item\";\n\n  /**\n   * Descriptor of multiple records (e.g. \"22 items\")\n   */\n  @Prop() recordAliasPlural: string = \"items\";\n\n  @Watch('records')\n  watchRecordsHandler() {\n    this.updatePages();\n    this.updateIndices();\n  }\n\n  @Prop({\n    reflect: true,\n    mutable: true\n  }) startIndex: number = 0;\n\n  @Prop({\n    reflect: true,\n    mutable: true\n  }) recordsDisplayed: number = 0;\n\n  @Watch('recordsDisplayed')\n  watchRecordsDisplayed() {\n    this.emitPaginationUpdatedEvent();\n  }\n\n  @State() itemsPerPageOptions: (number | string)[] = [10, 25, 50, 100, \"All\"];\n\n  @State() selectedItemsPerPageOptionIndex: number = 0;\n\n  @Prop({\n    reflect: true,\n    mutable: true\n  }) selectedPage: number = 1;\n\n  @State() pages: number = 1;\n\n\n\n  parseOptionElements(options: HTMLCollection) {\n\n    let newItemsPerPageOptions: Array<number | string> = [];\n\n    for (let i = 0; i < options.length; i++) {\n      \n      let option = options.item(i);\n      \n      // First, confirm this element is indeed a yeti-table-pagination-option element.\n      if (option.tagName.toLowerCase() == 'yeti-table-pagination-option') {\n\n        // Check to see if it has a selected attribute.\n        if (option.attributes && option.attributes['selected'] && (option.attributes['selected'].value == 'undefined' || option.attributes['selected'].value == \"true\")) {\n          this.selectedItemsPerPageOptionIndex = i;\n        }\n\n        // Check to see if it has an all attribute, and push the string \"All\" if it does.\n        if (option.attributes && option.attributes['all']) {\n\n          newItemsPerPageOptions.push(\"All\");\n\n        } else {\n\n          // Check to see if it has a valid number for its contents, and warn if it doesn't.\n          let contents = parseInt(option.innerHTML);\n\n          if (!Number.isNaN(contents)) {\n\n            newItemsPerPageOptions.push(contents);\n\n          } else {\n            \n            console.warn(`Ignoring \\<yeti-table-pagination-option\\> with invalid value \\\"${option.innerHTML}\\\". Numbers only please.`);\n          \n          }\n\n        }\n\n      }\n\n    } // End for\n\n    // Update itemsPerPageOptions if necessary.\n    if (newItemsPerPageOptions.length > 0) {\n      this.itemsPerPageOptions = newItemsPerPageOptions;\n    }\n\n    // Finally, we need to remove the option elements.\n    for (let j = options.length - 1; j >= 0; --j) {\n      options.item(j).remove();\n    }\n\n  }\n\n\n\n  getItemsPerPageOption() {\n    return this.itemsPerPageOptions[ this.selectedItemsPerPageOptionIndex ];\n  }\n\n\n\n  updateIndices() {\n    let itemsPerPage = this.getItemsPerPageOption();\n\n    // First set start index\n    if (itemsPerPage == \"All\" || itemsPerPage as number > this.records) {\n\n      this.startIndex = 0;\n\n    } else {\n\n      this.startIndex = ((this.selectedPage - 1) * (itemsPerPage as number));\n\n    }\n\n    // Second set end index\n    if (itemsPerPage == \"All\" || itemsPerPage as number > this.records) {\n\n      this.recordsDisplayed = this.records;\n\n    } else {\n      \n      this.recordsDisplayed = Math.min(\n        (this.records - this.startIndex),\n        (itemsPerPage as number)\n      )\n\n    }\n\n  }\n\n\n\n  updatePages() {\n    let p = this.getItemsPerPageOption();\n    p = (p == \"All\") ? 1 : Math.ceil(this.records / (p as number));\n    this.pages = p;\n  }\n\n\n\n  handleItemsPerPageChange(e: Event) {\n    let select = e.target as HTMLSelectElement;\n    this.selectedItemsPerPageOptionIndex = select.selectedIndex;\n    this.selectedPage = 1;\n    this.updatePages();\n    this.updateIndices();\n    e.preventDefault();\n    this.emitPaginationUpdatedEvent();\n  }\n\n\n\n  handlePageSelectChange(e: Event) {\n    let select = e.target as HTMLSelectElement;\n    this.selectedPage = parseInt(select.value);\n    this.updateIndices();\n    e.preventDefault();\n    this.emitPaginationUpdatedEvent();\n  }\n\n\n\n  handlePreviousPageButtonClick(ev) {\n    this.selectedPage = Math.max(1, this.selectedPage - 1);\n    this.updateIndices();\n    ev.preventDefault();\n    this.emitPaginationUpdatedEvent();\n  }\n\n\n\n  handleNextPageButtonClick(ev) {\n    this.selectedPage = Math.min(this.pages, this.selectedPage + 1);\n    this.updateIndices();\n    ev.preventDefault();\n    this.emitPaginationUpdatedEvent();\n  }\n\n\n\n  emitPaginationUpdatedEvent() {\n    let itemsPerPage = this.getItemsPerPageOption();\n    this.paginationUpdated.emit({\n      \"currentPage\": this.selectedPage-1,\n      \"recordsDisplayed\": this.recordsDisplayed,\n      \"recordsPerPage\": itemsPerPage\n    });\n  }\n\n\n\n  componentWillLoad() {\n    let optionElements = this.el.children;\n\n    // Look for and handle any <yeti-table-pagnation-option> elements.\n    if (optionElements.length > 0) {\n      \n      this.parseOptionElements(optionElements);\n\n    }\n\n  }\n\n\n\n  render() {\n\n    let cssClasses = 'yeti-table-pagination';\n\n    //console.warn('Pagination render()', this.el);\n\n    if (this.cssClass != '') {\n      cssClasses += ' ' + this.cssClass;\n    }\n\n    return (\n      \n      <nav class={cssClasses} aria-label=\"Table Pagination\">\n\n        {/* Items per page */}\n        \n          <div class=\"yeti-table-pagination-items_per_page\">\n\n            { (this.showOptions) ?\n\n              \n              [<label htmlFor=\"demo-items_per_page\" class=\"yeti-table-pagination-items_per_page-label\">{this.recordAliasPlural} per page:</label>,\n\n              <select id=\"demo-items_per_page\" class=\"yeti-select yeti-table-pagination-items_per_page-select\" onChange={(e) => {\n                this.handleItemsPerPageChange(e);\n              }}>\n                {\n                  this.itemsPerPageOptions.map((option, index) => {\n                    return <option value={option} selected={(index == this.selectedItemsPerPageOptionIndex)} class=\"yeti-table-pagination-items_per_page-select-option\">{option}</option>\n                  })\n                }\n              </select>]\n\n            :\n              \n              \"\"\n            \n            }\n\n              <span class=\"yeti-table-pagination-items_per_page-count\">\n                { \n                  this.getItemsPerPageOption() == \"All\" || this.records == 0 ? \n                    \"\" \n                    : (this.startIndex + 1) + ' to ' + (this.startIndex + this.recordsDisplayed) /*(this.endIndex + 1)*/ + ' of '\n                }\n                {this.records} { this.records == 1 ? this.recordAliasSingular : this.recordAliasPlural}\n              </span>\n\n          </div>\n\n\n        {/* Pages */}\n        {\n          (this.records > 0) ?\n          <div class=\"yeti-table-pagination-pages\">\n\n              <label htmlFor=\"demo-pages\" class=\"yeti-a11y-hidden\">Page number, of {this.pages} page{this.pages == 1 ? '' : 's'}</label>\n\n              <select id=\"demo-pages\" class=\"yeti-select yeti-table-pagination-pages-select\" onChange={(e) => {\n                this.handlePageSelectChange(e);\n              }}>\n                  {(() => {\n                    let options = [];\n                    for (let i=1; i <= this.pages; i++) {\n                      options.push(<option value={i} class=\"yeti-table-pagination-pages-select-page\"  {...((i == this.selectedPage) && { selected: true })}>{i}</option>);\n                    }\n                    return options;\n                  })()}\n              </select>\n\n              <span class=\"yeti-table-pagination-pages-of_pages\" aria-hidden=\"true\">of {this.pages} page{this.pages == 1 ? '' : 's'}</span>\n\n              <ul class=\"yeti-table-pagination-pages-buttons\">\n\n                  <li class=\"yeti-table-pagination-pages-buttons-action\">\n\n                      <button \n                        class=\"yeti-table-pagination-pages-buttons-button\"\n                        onClick={(ev) => {this.handlePreviousPageButtonClick(ev)}}\n                        {...((this.selectedPage == 1) && { disabled: true })}\n                      >\n\n                          <span class=\"material-icons\" aria-hidden=\"true\">arrow_left</span>\n                          <span class=\"yeti-a11y-hidden\">Previous page</span>\n\n                      </button>\n\n                  </li>\n\n                  <li class=\"yeti-table-pagination-pages-buttons-action\">\n                    \n                      <button \n                        class=\"yeti-table-pagination-pages-buttons-button\"\n                        onClick={(ev) => {this.handleNextPageButtonClick(ev)}}\n                        {...((this.selectedPage == this.pages) && { disabled: true })}\n                      >\n                          <span class=\"material-icons\" aria-hidden=\"true\">arrow_right</span>\n                          <span class=\"yeti-a11y-hidden\">Next page</span>\n                      </button>\n\n                  </li>\n\n              </ul>\n\n          </div>\n          :\n          \"\"\n        }\n        \n    </nav>\n    );\n  }\n\n\n  componentDidRender() {\n    //console.warn(\"Pagination did render.\", this.el)\n    \n  }\n\n}\n"],"mappings":"mGAOaA,EAAmB,M,4FAMH,G,YAEFC,EAAMC,mB,aAEL,E,iBAEK,K,yBAKO,O,uBAKF,Q,gBAWZ,E,sBAKM,E,yBAOsB,CAAC,GAAI,GAAI,GAAI,IAAK,O,qCAEnB,E,kBAKzB,E,WAED,C,CA7BzB,mBAAAC,GACEC,KAAKC,cACLD,KAAKE,e,CAcP,qBAAAC,GACEH,KAAKI,4B,CAgBP,mBAAAC,CAAoBC,GAElB,IAAIC,EAAiD,GAErD,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAQG,OAAQD,IAAK,CAEvC,IAAIE,EAASJ,EAAQK,KAAKH,GAG1B,GAAIE,EAAOE,QAAQC,eAAiB,+BAAgC,CAGlE,GAAIH,EAAOI,YAAcJ,EAAOI,WAAW,cAAgBJ,EAAOI,WAAW,YAAYC,OAAS,aAAeL,EAAOI,WAAW,YAAYC,OAAS,QAAS,CAC/Jf,KAAKgB,gCAAkCR,C,CAIzC,GAAIE,EAAOI,YAAcJ,EAAOI,WAAW,OAAQ,CAEjDP,EAAuBU,KAAK,M,KAEvB,CAGL,IAAIC,EAAWC,SAAST,EAAOU,WAE/B,IAAKC,OAAOC,MAAMJ,GAAW,CAE3BX,EAAuBU,KAAKC,E,KAEvB,CAELK,QAAQC,KAAK,+DAAkEd,EAAOU,mC,IAW9F,GAAIb,EAAuBE,OAAS,EAAG,CACrCT,KAAKyB,oBAAsBlB,C,CAI7B,IAAK,IAAImB,EAAIpB,EAAQG,OAAS,EAAGiB,GAAK,IAAKA,EAAG,CAC5CpB,EAAQK,KAAKe,GAAGC,Q,EAOpB,qBAAAC,GACE,OAAO5B,KAAKyB,oBAAqBzB,KAAKgB,gC,CAKxC,aAAAd,GACE,IAAI2B,EAAe7B,KAAK4B,wBAGxB,GAAIC,GAAgB,OAASA,EAAyB7B,KAAK8B,QAAS,CAElE9B,KAAK+B,WAAa,C,KAEb,CAEL/B,KAAK+B,YAAe/B,KAAKgC,aAAe,GAAMH,C,CAKhD,GAAIA,GAAgB,OAASA,EAAyB7B,KAAK8B,QAAS,CAElE9B,KAAKiC,iBAAmBjC,KAAK8B,O,KAExB,CAEL9B,KAAKiC,iBAAmBC,KAAKC,IAC1BnC,KAAK8B,QAAU9B,KAAK+B,WACpBF,E,EASP,WAAA5B,GACE,IAAImC,EAAIpC,KAAK4B,wBACbQ,EAAKA,GAAK,MAAS,EAAIF,KAAKG,KAAKrC,KAAK8B,QAAWM,GACjDpC,KAAKsC,MAAQF,C,CAKf,wBAAAG,CAAyBC,GACvB,IAAIC,EAASD,EAAEE,OACf1C,KAAKgB,gCAAkCyB,EAAOE,cAC9C3C,KAAKgC,aAAe,EACpBhC,KAAKC,cACLD,KAAKE,gBACLsC,EAAEI,iBACF5C,KAAKI,4B,CAKP,sBAAAyC,CAAuBL,GACrB,IAAIC,EAASD,EAAEE,OACf1C,KAAKgC,aAAeb,SAASsB,EAAO1B,OACpCf,KAAKE,gBACLsC,EAAEI,iBACF5C,KAAKI,4B,CAKP,6BAAA0C,CAA8BC,GAC5B/C,KAAKgC,aAAeE,KAAKc,IAAI,EAAGhD,KAAKgC,aAAe,GACpDhC,KAAKE,gBACL6C,EAAGH,iBACH5C,KAAKI,4B,CAKP,yBAAA6C,CAA0BF,GACxB/C,KAAKgC,aAAeE,KAAKC,IAAInC,KAAKsC,MAAOtC,KAAKgC,aAAe,GAC7DhC,KAAKE,gBACL6C,EAAGH,iBACH5C,KAAKI,4B,CAKP,0BAAAA,GACE,IAAIyB,EAAe7B,KAAK4B,wBACxB5B,KAAKkD,kBAAkBC,KAAK,CAC1BC,YAAepD,KAAKgC,aAAa,EACjCC,iBAAoBjC,KAAKiC,iBACzBoB,eAAkBxB,G,CAMtB,iBAAAyB,GACE,IAAIC,EAAiBvD,KAAKwD,GAAGC,SAG7B,GAAIF,EAAe9C,OAAS,EAAG,CAE7BT,KAAKK,oBAAoBkD,E,EAQ7B,MAAAG,GAEE,IAAIC,EAAa,wBAIjB,GAAI3D,KAAK4D,UAAY,GAAI,CACvBD,GAAc,IAAM3D,KAAK4D,Q,CAG3B,OAEEC,EAAA,OAAAC,IAAA,2CAAKC,MAAOJ,EAAU,aAAa,oBAI/BE,EAAA,OAAAC,IAAA,2CAAKC,MAAM,wCAEN/D,KAAgB,YAGjB,CAAC6D,EAAA,SAAOG,QAAQ,sBAAsBD,MAAM,8CAA8C/D,KAAKiE,kBAAiB,cAEhHJ,EAAA,UAAQK,GAAG,sBAAsBH,MAAM,0DAA0DI,SAAW3B,IAC1GxC,KAAKuC,yBAAyBC,EAAE,GAG9BxC,KAAKyB,oBAAoB2C,KAAI,CAAC1D,EAAQ2D,IAC7BR,EAAA,UAAQ9C,MAAOL,EAAQ4D,SAAWD,GAASrE,KAAKgB,gCAAkC+C,MAAM,sDAAsDrD,OAO3J,GAIAmD,EAAA,QAAAC,IAAA,2CAAMC,MAAM,8CAER/D,KAAK4B,yBAA2B,OAAS5B,KAAK8B,SAAW,EACvD,GACG9B,KAAK+B,WAAa,EAAK,QAAU/B,KAAK+B,WAAa/B,KAAKiC,kBAA4C,OAE1GjC,KAAK8B,QAAO,IAAI9B,KAAK8B,SAAW,EAAI9B,KAAKuE,oBAAsBvE,KAAKiE,oBAQ1EjE,KAAK8B,QAAU,EAChB+B,EAAA,OAAKE,MAAM,+BAEPF,EAAA,SAAOG,QAAQ,aAAaD,MAAM,oBAAkB,mBAAkB/D,KAAKsC,MAAK,QAAOtC,KAAKsC,OAAS,EAAI,GAAK,KAE9GuB,EAAA,UAAQK,GAAG,aAAaH,MAAM,iDAAiDI,SAAW3B,IACxFxC,KAAK6C,uBAAuBL,EAAE,GAE3B,MACC,IAAIlC,EAAU,GACd,IAAK,IAAIE,EAAE,EAAGA,GAAKR,KAAKsC,MAAO9B,IAAK,CAClCF,EAAQW,KAAK4C,EAAA,SAAAW,OAAAC,OAAA,CAAQ1D,MAAOP,EAAGuD,MAAM,2CAAiDvD,GAAKR,KAAKgC,cAAiB,CAAEsC,SAAU,OAAU9D,G,CAEzI,OAAOF,CACR,EANA,IASLuD,EAAA,QAAME,MAAM,uCAAsC,cAAa,QAAM,MAAK/D,KAAKsC,MAAK,QAAOtC,KAAKsC,OAAS,EAAI,GAAK,KAElHuB,EAAA,MAAIE,MAAM,uCAENF,EAAA,MAAIE,MAAM,8CAENF,EAAA,SAAAW,OAAAC,OAAA,CACEV,MAAM,6CACNW,QAAU3B,IAAQ/C,KAAK8C,8BAA8BC,EAAG,GAClD/C,KAAKgC,cAAgB,GAAM,CAAE2C,SAAU,OAG3Cd,EAAA,QAAME,MAAM,iBAAgB,cAAa,QAAM,cAC/CF,EAAA,QAAME,MAAM,oBAAkB,mBAMtCF,EAAA,MAAIE,MAAM,8CAENF,EAAA,SAAAW,OAAAC,OAAA,CACEV,MAAM,6CACNW,QAAU3B,IAAQ/C,KAAKiD,0BAA0BF,EAAG,GAC9C/C,KAAKgC,cAAgBhC,KAAKsC,OAAU,CAAEqC,SAAU,OAEpDd,EAAA,QAAME,MAAM,iBAAgB,cAAa,QAAM,eAC/CF,EAAA,QAAME,MAAM,oBAAkB,iBAS9C,G,CAQR,kBAAAa,G"}