{"file":"yeti-menu-button.entry.esm.js","mappings":"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","names":[],"sources":["src/components/yeti-menu-button/yeti-menu-button.tsx"],"sourcesContent":["import { Component, Prop, h, State, Event, EventEmitter, Element, Listen, Watch } from '@stencil/core';\nimport { utils, YetiMenuButtonOption } from '../../utils/utils';\n\n@Component({\n  tag: 'yeti-menu-button',\n  shadow: false,\n})\nexport class YetiMenuButton {\n\n  @Element() el: HTMLElement;\n\n  @Event({ bubbles: true }) menuButtonChange: EventEmitter;\n\n  @Event({ bubbles: true }) menuButtonSelectionMade: EventEmitter;\n\n  @Prop({ attribute: 'wrapper-class'}) wrapperCSS: string = '';\n\n  @Prop({ attribute: 'button-class'}) buttonCSS: string = '';\n\n  @Prop({ attribute: 'menu-class'}) menuCSS: string = '';\n\n  @Prop({\n    mutable: true,\n    reflect: true\n  }) buttonId: string = \"\";\n\n  @Prop() buttonType?: string = \"\";\n\n  @Prop({\n    mutable: true,\n    reflect: true\n  }) menuId: string = \"\";\n\n  @Prop() tooltipText: string = \"Options\";\n\n  @Prop() menuAlignment: string = \"\";\n\n  @Prop() hasTooltip: boolean = true;\n\n  @Prop({\n    mutable: true,\n    reflect: true\n  }) value: string = '';\n  @Watch('value')\n  handleValueChange(newValue: string, oldValue: string) {\n    this.menuButtonChange.emit({\n      \"newValue\": newValue,\n      \"oldValue\": oldValue\n    });\n  }\n\n  @Prop() labelledBy: string = \"\";\n\n  @Prop() describedBy: string = \"\";\n\n  @State() options: YetiMenuButtonOption[] = [];\n\n  @State() isTouched: boolean = false;\n\n  @State() iLoveJSX: boolean = false;\n\n  @State() isOpen: boolean = false;\n\n  @State() cursorPosition: number = -1;\n\n  private justMadeASelection: boolean = false;\n\n  private hasCustomButtonContents: boolean = false;\n\n\n  @Listen(\"click\", {\n    target: \"body\"\n  })\n  handleDefocusingClick() {\n    if (this.el.querySelectorAll(\":focus\").length == 0 && this.isOpen) {\n      this.closeMenu();\n    }\n  }\n\n\n\n  @Listen(\"keydown\")\n  handleKeydown(ev: KeyboardEvent) {\n\n    let key = ev.key.toString().toLowerCase();\n\n    switch (key) {\n\n      // Handle potential tabout\n      case \"tab\": {\n\n        this.closeMenu();\n        \n        break;\n      }\n\n\n      // Handle down arrow\n      case \"arrowdown\": {\n\n        // Menu is already open, focus on next option.\n        if (this.isOpen) {\n\n          this.cursorPosition = (this.cursorPosition + 1) % this.options.length;\n\n        // Menu isn't open, so open it and focus on the first option.\n        } else {\n          \n          this.cursorPosition = 0;\n          this.openMenu();\n        \n        }\n        \n        ev.preventDefault();\n\n        break;\n      }\n\n\n      // Handle up arrow\n      case \"arrowup\": {\n\n        // Menu is already open, focus on previous option.\n        if (this.isOpen) {\n\n          this.cursorPosition = (this.cursorPosition - 1 + this.options.length) % this.options.length;\n          \n        // Menu isn't open, so open it and focus on the last option.\n        } else {\n\n          this.cursorPosition = this.options.length - 1;\n          this.openMenu();\n\n        }\n        \n        ev.preventDefault();\n\n        break;\n      }\n\n\n      // Handle space, which should open the menu but do nothing else.\n      case \" \": {\n\n        // Check to see if the menu is open.\n        if (!this.isOpen) {\n          this.cursorPosition = 0;\n          this.openMenu();\n        }\n\n        ev.preventDefault();\n\n        break;\n      }\n\n\n      // Handle enter\n      case \"enter\": {\n\n        // Check to see if the menu is open.\n        if (!this.isOpen) {\n          \n          this.openMenu();\n          this.cursorPosition = 0;\n\n          ev.preventDefault();\n        }\n\n        // Menu is already open, so the user just made a selection.\n        else {\n\n          this.value = this.options[this.cursorPosition].label;\n          this.justMadeASelection = true;\n          this.closeMenu();\n          // Note we're not preventing default here, so if the option was a link, that link will still work.\n        \n        }\n\n        break;\n      }\n\n\n      // Home\n      case \"home\": {\n        \n        // If the menu is open then move the cursor to the first option.\n        if (this.isOpen) {\n\n          this.cursorPosition = 0;\n\n        }\n\n        ev.preventDefault();\n\n        break;\n      }\n\n\n      // End\n      case \"end\": {\n        \n        if (this.isOpen) {\n\n          this.cursorPosition = this.options.length - 1;\n\n        }\n\n        ev.preventDefault();\n\n        break;\n      }\n\n    }\n  }\n\n\n\n  openMenu() {\n    this.isOpen = true;\n  }\n\n\n\n  closeMenu() {\n    this.isOpen = false;\n    this.cursorPosition = -1;\n    this.isTouched = true;\n  }\n\n\n\n  toggleMenu() {\n    if (this.isOpen) {\n      this.closeMenu()\n    } else {\n      this.openMenu();\n    }\n  }\n\n\n\n  parseChildTags() {\n\n    let options = this.el.querySelectorAll(\"yeti-menu-button-option\");\n    let buttonLabel = this.el.querySelector(\"yeti-menu-button-contents\");\n\n    this.options = (options && options.length && options.length > 0) ? [] : this.options;\n\n    for (let i = 0; i < options.length; i++) {\n      \n      let option = options.item(i) as Element;\n      \n      // First, confirm this element is indeed a yeti-menu-button-option element.\n      if (option.tagName.toLowerCase() == 'yeti-menu-button-option') {\n\n        let optionObject: YetiMenuButtonOption = {\n          label: \"\",\n          id: \"\",\n          href: \"\",\n          value: \"\",\n          hasHTML: false\n        };\n\n        let optionId = option.getAttribute(\"id\");\n\n        optionObject.id = (optionId && optionId != \"\") ? optionId : `${this.el.getAttribute(\"id\")}_option${i}`;\n        optionObject.label = (option as HTMLElement).innerText.trim().replace(/\\t/g, '');\n        optionObject.label = optionObject.label.replace(/\\n/g, ' ');\n\n        // Check to see if it has a href attribute.\n        if (option.hasAttribute(\"href\") && option.getAttribute(\"href\") != \"\") {\n          optionObject.href = option.getAttribute(\"href\");\n        }\n\n        // Check to see if it's normal or fancy (i.e. has HTML)\n        if (option.childNodes.length != 1 || option.firstChild.nodeType != 3) { // If there's not just a single text node\n\n          optionObject.hasHTML = true;\n\n          // Create a slot element and move all childNodes to it.\n          let div = document.createElement(\"div\");\n          div.setAttribute(\"slot\", optionObject.id);\n\n          while (option.childNodes.length > 0) {\n            div.appendChild(option.childNodes[0]);\n          }\n\n          this.el.appendChild(div);\n\n          optionObject.innerHTML = option.innerHTML;\n          \n        }\n\n        this.options.push(optionObject);\n\n      }\n\n    } // End for\n\n    // Handle the button label (if it exists)\n    if (buttonLabel) {\n      this.hasCustomButtonContents = true;\n      buttonLabel.setAttribute(\"slot\", \"buttonContents\");\n    }\n\n    // Finally, we need to remove the option elements.\n    for (let j = options.length - 1; j >= 0; --j) {\n      options.item(j).remove();\n    }\n\n  }\n\n\n\n  unwrapButtonContents() {\n    let wrapper = this.el.querySelector(\"yeti-menu-button-contents\");\n    if (wrapper) {\n      wrapper.replaceWith(...Array.from(wrapper.childNodes));\n    }\n  }\n\n\n\n  renderMenuItems() {\n    // Creates the <option>s for the actual <select>.\n    let items = [];\n    for (let i=0; i<this.options.length; i++) {\n      // let optionActual = <option value={this.options[i].label} selected={this.options[i].selected}>{this.options[i].label}</option>;\n      // optionsActual.push(optionActual);\n\n      let option = this.options[i];\n      let linkOrButtonElement;\n      let item;\n      //let listItemId = `${option.id}_item${i}`;\n      let listItemId = `${option.id}`;\n\n      // See if it's a link\n      if (option.href) {\n        linkOrButtonElement = <a \n          href={option.href} \n          class=\"yeti-menu_button-menu-item-link\" \n          role=\"menuitem\" \n          tabindex=\"-1\"\n          data-option-index={i}\n          onClick={(ev) => { this.handleOptionClick(i, ev, true) }}>\n            \n            {(option.hasHTML) ? <slot name={option.id}></slot> : option.label}\n            \n        </a>\n      }\n\n      // Nope, it's a button.\n      else {\n        linkOrButtonElement = <button \n          class=\"yeti-menu_button-menu-item-button\" \n          role=\"menuitem\" \n          tabindex=\"-1\"\n          data-option-index={i}\n          onClick={(ev) => { this.handleOptionClick(i, ev) }}>\n\n            {(option.hasHTML) ? <slot name={option.id}></slot> : option.label}\n\n        </button>\n      }\n\n      item = <li \n        class=\"yeti-menu_button-menu-item\" \n        role=\"presentation\"\n        id={listItemId}\n        key={listItemId}\n      >{linkOrButtonElement}</li>\n\n      items.push(item);\n\n    }\n\n    return items;\n  }\n\n\n\n  handleOptionClick(i: number, ev: Event, isLink: boolean = false) {\n\n    this.value = this.options[i].label;\n    this.justMadeASelection = true;\n    this.closeMenu();\n    if (!isLink) {\n      ev.preventDefault();\n    }\n  }\n\n\n\n  handleActualFocus() {\n    let facade = this.el.querySelector(\".yeti-multiselect\") as HTMLElement;\n    if (facade) {\n      facade.focus();\n    }\n  }\n\n\n\n  handleButtonClick(ev: Event) {\n    this.isOpen = !this.isOpen;\n    ev.preventDefault();\n  }\n\n\n\n  renderButton(buttonClass: string) {\n    return <button \n      class={buttonClass}\n      aria-haspopup=\"true\"\n      {...((this.isOpen) ? {\"aria-expanded\": \"true\"} : {})}\n      aria-controls={this.menuId} \n      id={this.buttonId}\n      role=\"button\"\n      onClick={(ev) => {\n        this.handleButtonClick(ev)\n    }}>\n\n      {(this.hasCustomButtonContents) ?\n        <slot name=\"buttonContents\"></slot>\n      :\n        [\n          <span class=\"material-icons\" aria-hidden=\"true\">more_vert</span>,\n          <span class=\"yeti-a11y-hidden\">Options</span>\n        ]\n      }\n    </button>\n  }\n\n\n\n  componentWillLoad() {\n    // Set ids\n    let elementId = this.el.getAttribute(\"id\");\n  \n    if (!elementId || elementId == \"\") {\n\n      this.el.setAttribute(\"id\", utils.generateUniqueId());\n\n    }\n\n    this.buttonId = (this.buttonId != \"\") ? this.buttonId : `${elementId}_button`;\n    this.menuId = (this.menuId != \"\") ? this.menuId : `${elementId}_menu`;\n\n  }\n\n\n\n  componentWillRender() {\n    // Look for and handle any <yeti-menu-button-*> tags.\n    this.parseChildTags();\n  }\n\n\n\n  componentDidRender() {\n\n    // Unwrap button contents, if necessary\n    this.unwrapButtonContents();\n\n    // If the cursor is over an option, make sure it's visible.\n    let selector = '[data-option-index=\"' + this.cursorPosition + '\"';\n    let linkOrButtonElement = this.el.querySelector(selector) as HTMLElement;\n    let menu = this.el.querySelector(\".yeti-menu_button-menu\");\n\n    if (linkOrButtonElement) {\n      \n      linkOrButtonElement.focus();\n\n    }\n\n    if (this.isOpen) {\n\n      menu.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"nearest\"\n      });\n\n    }\n\n    if (this.justMadeASelection) {\n\n      let button = this.el.querySelector('.yeti-menu_button-button') as HTMLElement;\n\n      if (button) {\n\n        button.focus();\n        button.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"nearest\"\n        });\n\n      }\n\n      this.menuButtonSelectionMade.emit({\n        \"value\": this.value\n      });\n\n      this.justMadeASelection = false;\n    }\n\n  }\n\n\n\n  render() {\n\n    let wrapperCSS = 'yeti-menu_button';\n    let buttonClass = 'yeti-menu_button-button';\n    let menuClass = 'yeti-menu_button-menu';\n    let tooltipId = `${this.el.getAttribute(\"id\")}_tooltip`;\n\n    if (this.menuAlignment.indexOf(\"right\") > -1) {\n      wrapperCSS += ' yeti-menu_button-right_aligned';\n    }\n\n    if (this.isOpen) {\n      wrapperCSS += ' yeti-menu_button__open';\n    }\n\n    if (this.buttonType && this.buttonType != \"\") {\n      buttonClass = `${buttonClass} yeti-menu_button-button-mimic ${buttonClass}-${this.buttonType}`;\n    }\n\n    wrapperCSS += (this.wrapperCSS && this.wrapperCSS != \"\") ? \" \" + this.wrapperCSS : \"\";\n    buttonClass += (this.buttonCSS && this.buttonCSS != \"\") ? \" \" + this.buttonCSS : \"\";\n    menuClass += (this.menuCSS && this.menuCSS != \"\") ? \" \" + this.menuCSS : \"\";\n\n    return ([\n      <div class={wrapperCSS}>\n\n        {\n          (this.hasTooltip) ?\n\n            <yeti-tooltip text={this.tooltipText} id={tooltipId} slotId={this.buttonId} tipId={`${this.buttonId}_tooltip`}>\n              {this.renderButton(buttonClass)}\n            </yeti-tooltip>\n\n          :\n\n            this.renderButton(buttonClass)\n        }\n\n        \n        <ul class={menuClass} role=\"menu\" id={this.menuId} aria-labelledby={this.buttonId} key={this.menuId}>\n\n          {this.renderMenuItems()}\n\n        </ul>\n\n      </div>\n    ]);\n  }\n\n}\n"],"version":3}