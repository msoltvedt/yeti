import{r as e,h as t,g as s}from"./p-028ac5ad.js";import{u as a}from"./p-5c303e9a.js";const i=class{constructor(t){e(this,t),this.tableClass="",this.tableId=a.generateUniqueId(),this.contents={head:{rows:[{cells:[{value:"Data"}]}]},body:{rows:[{cells:[{value:"This table has no data."}]}]}},this.contentsActual=void 0,this.isValid=!0,this.iLoveJSX=!0}watchContentsHandler(e){return e.body?e.body.rows?void 0:(console.error("Supplied data must have rows in table body."),!1):(console.error("Supplied data has no table body."),!1)}handlePaginationUpdate(){this.iLoveJSX=!this.iLoveJSX}componentWillLoad(){this.watchContentsHandler(this.contents),this.setHeadingColumnIndices()}isValidTableData(e){return a.isValidJSON(e)?(e=JSON.stringify(e),e=JSON.parse(e),!0):(console.error("Error in yeti-table; supplied data was not valid JSON."),!0)}setHeadingColumnIndices(){this.contents.head.rows.forEach(((e,t)=>{e.rowIndex=t,e.cells.forEach(((e,t)=>{e.columnIndex=t}))}))}setSortableOnCellsOtherThanTheOneWithThisIndex(e){let t=this.contents.head.rows[0].cells;for(let s=0,a=t[0];s<t.length;s++,a=t[s])a.sortDirection=a.columnIndex==e?a.sortDirection:"unsorted"}handleSort(e){this.contents.body.rows.sort(((t,s)=>{let i=t.cells[e.columnIndex].value,n=s.cells[e.columnIndex].value,l=a.getStringifiedType(i),r=a.getStringifiedType(n),d="ascending"==e.sortDirection?-1:1;if(l!=r)if(d>0)switch(l){case"number":case"string":return-1;default:return 1}else switch(l){case"date":case"string":return-1;default:return 1}switch(l){case"number":return(a.castToNumber(i)-a.castToNumber(n))*d;case"string":return i==n?0:i<n?-1*d:1*d;case"date":{let e=new Date(i),t=new Date(n);return e==t?0:e<t?-1*d:1*d}}})),e.sortDirection="ascending"==e.sortDirection?"descending":"ascending",this.setSortableOnCellsOtherThanTheOneWithThisIndex(e.columnIndex),this.iLoveJSX=!this.iLoveJSX}renderCell(e){let s=e.cssClass&&""!=e.cssClass?" "+e.cssClass:"";if(e.id=e.id?e.id:a.generateUniqueId(),e.isHeading){if(e.sortDirection){let s,a,i;switch(e.sortDirection=e.sortDirection.toLowerCase(),e.sortDirection){case"ascending":a="Sorted ascending",i="expand_less";break;case"descending":a="Sorted descending",i="expand_more";break;default:a="Sortable",i="unfold_more"}return s=t("th",{class:"yeti-table-heading yeti-table-sortable"},t("div",{class:"yeti-table-heading-compound"},t("button",{class:"yeti-table-heading-button",onClick:()=>{this.handleSort(e)}},t("div",{class:"yeti-table-heading-button-label"},e.value),t("span",{class:"yeti-table-heading-button-icon"},t("span",{class:"yeti-a11y-hidden"},a),t("span",{class:"material-icons","aria-hidden":"true",title:a},i))))),s}return t("th",{class:"yeti-table-heading"+s,key:e.id},e.value)}return t("td",{class:"yeti-table-cell"+s,key:e.id},e.value)}renderRow(e){let t=[];return e.cells.map((e=>{t.push(this.renderCell(e))})),t}renderRows(e=0,s=this.contents.body.rows.length-1){let i=[];for(let n=e;n<=s;n++){const e=this.contents.body.rows[n];e.id=e.id?e.id:a.generateUniqueId(),i.push(t("tr",{class:"yeti-table-body-row",key:e.id},this.renderRow(e)))}return i}render(){let e="yeti-table",s=this.el.querySelector("yeti-table-pagination"),i=0,n=this.contents.body.rows.length-1;return null!=s&&(s.records=this.contents.body.rows.length,s.id=s.id?s.id:a.generateUniqueId(),i=s.startIndex-1,n=s.endIndex-1),""!=this.tableClass&&(e+=" "+this.tableClass),0==this.isValid&&(e+=" yeti-input__error"),t("table",{class:e},t("thead",{class:"yeti-table-head"},t("tr",{class:"yeti-table-head-row"},this.contents.head.rows.map((e=>this.renderRow(e))))),t("tbody",{class:"yeti-table-body"},this.renderRows(i,n)))}get el(){return s(this)}static get watchers(){return{contents:["watchContentsHandler"]}}};export{i as yeti_table}