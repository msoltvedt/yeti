{"version":3,"names":["YetiPageContents","this","headings","componentWillLoad","elId","el","id","elsParent","elsGrandparent","headingElements","pageWrapper","document","createElement","classList","add","setAttribute","utils","generateUniqueId","wrapperId","parentElement","console","warn","insertBefore","appendChild","querySelectorAll","i","length","newHeading","label","level","innerText","parseInt","substring","push","log","render","h","key","class","map","heading","index"],"sources":["src/components/yeti-page-contents/yeti-page-contents.tsx"],"sourcesContent":["import { Component, Prop, h, Element } from '@stencil/core';\r\nimport { utils, YetiPageContentsHeader } from '../../utils/utils';\r\n\r\n@Component({\r\n  tag: 'yeti-page-contents',\r\n  shadow: false,\r\n})\r\nexport class YetiPageContents {\r\n\r\n  @Element() el: HTMLElement;\r\n\r\n  /**\r\n   * Whether to show the Page Contents menu in expanded or closed state.\r\n   */\r\n  @Prop() isExpanded: boolean = false;\r\n\r\n\r\n  /**\r\n   * Whether to show the Page Contents menu in expanded or closed state.\r\n   */\r\n  @Prop() wrapperId: string = \"\"; // Will be set in componentWillLoad;\r\n\r\n\r\n  /**\r\n   * An array of objects containing the heading names and ids.\r\n   */\r\n  headings: YetiPageContentsHeader[] = []; // Will be set in componentWillLoad;\r\n\r\n\r\n  componentWillLoad() {\r\n    \r\n    let elId = this.el.id;\r\n    let elsParent;\r\n    let elsGrandparent;\r\n    let headingElements;\r\n    let pageWrapper = document.createElement(\"div\");\r\n    pageWrapper.classList.add(\"yeti-page_contents-wrapper\");\r\n\r\n    // Hide this whole component from screen-readers (since they have a better version built in)\r\n    this.el.setAttribute(\"aria-hidden\", \"true\");\r\n\r\n    // Set up ids\r\n    if (!elId) {\r\n      elId = utils.generateUniqueId();\r\n      this.wrapperId = `${elId}_wrapper`;\r\n    }\r\n\r\n    // Set up page structure:\r\n    // - Wrap el's parent in a new div with class .yeti-page_contents-wrapper\r\n    // - Move the parent into that div\r\n    // - Make el a sibling of parent\r\n    elsParent = this.el.parentElement;\r\n    elsGrandparent = elsParent.parentElement;\r\n\r\n    if (!elsParent || !elsGrandparent) {\r\n      console.warn(\"yeti-page-contents requires containing parent and grandparent elements.\");\r\n      return;\r\n    }\r\n\r\n    elsParent.classList.add(\"yeti-page_contents-wrappee\");\r\n\r\n    elsGrandparent.insertBefore(pageWrapper, elsParent);\r\n    pageWrapper.appendChild(elsParent);\r\n    pageWrapper.appendChild(this.el);\r\n\r\n    // Build the list of headings\r\n    headingElements = elsParent.querySelectorAll(\"h1, h2, h3, h4, h5, h6\");\r\n\r\n    for (let i = 0; i < headingElements.length; i++) {\r\n      let newHeading: YetiPageContentsHeader = {\r\n        label: \"\",\r\n        id: \"\",\r\n        level: 1\r\n      };\r\n      newHeading.label = headingElements[i].innerText;\r\n      newHeading.id = utils.generateUniqueId(); // Just for now\r\n      newHeading.level = parseInt((headingElements[i].nodeName).substring(1)); // Get the \"n\" in Hn (e.g. 2 in H2)\r\n      \r\n      this.headings.push(newHeading);\r\n    }\r\n\r\n    console.log(this.headings);\r\n\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n\r\n    return (\r\n      \r\n      <div class=\"yeti-page_contents\" id={this.wrapperId}>\r\n\r\n        <h2 class=\"yeti-page_contents-title\">Page Contents</h2>\r\n\r\n        <ul class=\"yeti-page_contents-headings\">\r\n          {this.headings.map((heading, index) => {\r\n              return <li>{index} {heading.label}</li>;\r\n            })\r\n          }\r\n        </ul>\r\n\r\n      </div>\r\n\r\n    );\r\n  }\r\n  \r\n\r\n}\r\n"],"mappings":"4FAOaA,EAAgB,M,yBAmB3BC,KAAAC,SAAqC,G,gBAZP,M,eAMF,E,CAS5B,iBAAAC,GAEE,IAAIC,EAAOH,KAAKI,GAAGC,GACnB,IAAIC,EACJ,IAAIC,EACJ,IAAIC,EACJ,IAAIC,EAAcC,SAASC,cAAc,OACzCF,EAAYG,UAAUC,IAAI,8BAG1Bb,KAAKI,GAAGU,aAAa,cAAe,QAGpC,IAAKX,EAAM,CACTA,EAAOY,EAAMC,mBACbhB,KAAKiB,UAAY,GAAGd,W,CAOtBG,EAAYN,KAAKI,GAAGc,cACpBX,EAAiBD,EAAUY,cAE3B,IAAKZ,IAAcC,EAAgB,CACjCY,QAAQC,KAAK,2EACb,M,CAGFd,EAAUM,UAAUC,IAAI,8BAExBN,EAAec,aAAaZ,EAAaH,GACzCG,EAAYa,YAAYhB,GACxBG,EAAYa,YAAYtB,KAAKI,IAG7BI,EAAkBF,EAAUiB,iBAAiB,0BAE7C,IAAK,IAAIC,EAAI,EAAGA,EAAIhB,EAAgBiB,OAAQD,IAAK,CAC/C,IAAIE,EAAqC,CACvCC,MAAO,GACPtB,GAAI,GACJuB,MAAO,GAETF,EAAWC,MAAQnB,EAAgBgB,GAAGK,UACtCH,EAAWrB,GAAKU,EAAMC,mBACtBU,EAAWE,MAAQE,SAAUtB,EAAgBgB,GAAW,SAAEO,UAAU,IAEpE/B,KAAKC,SAAS+B,KAAKN,E,CAGrBP,QAAQc,IAAIjC,KAAKC,S,CAMnB,MAAAiC,GAEE,OAEEC,EAAA,OAAAC,IAAA,2CAAKC,MAAM,qBAAqBhC,GAAIL,KAAKiB,WAEvCkB,EAAA,MAAAC,IAAA,2CAAIC,MAAM,4BAA0B,iBAEpCF,EAAA,MAAAC,IAAA,2CAAIC,MAAM,+BACPrC,KAAKC,SAASqC,KAAI,CAACC,EAASC,IAClBL,EAAA,UAAKK,EAAK,IAAGD,EAAQZ,U"}